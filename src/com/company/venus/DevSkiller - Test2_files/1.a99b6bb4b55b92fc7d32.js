(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./node_modules/firepad/dist sync recursive":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="./node_modules/firepad/dist sync recursive"},"./src/app/admin/shared/tasks/types.ts":function(e,t,n){"use strict";var i=n("./src/common/types/task.ts");n.d(t,"a",function(){return i.c})},"./src/app/exam/build/build-console-loader/build-console-loader.component.html":function(e,t){e.exports='<div class="exam-preloader">\n  <div class="cogs">\n    <div class="cog-left"></div>\n    <div class="cog-right"></div>\n    <div class="cog-center"></div>\n  </div>\n  <div class="preloader-text text-center">\n    Building project, please wait...\n  </div>\n</div>\n'},"./src/app/exam/build/build-console-loader/build-console-loader.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/build/build-console/build-console.component.html":function(e,t){e.exports='<exam-build-console-loader ng-if="$ctrl.build.isInProgress()"></exam-build-console-loader>\n<div class="exam-build-console__log" ng-if="$ctrl.logHtml" ng-bind-html="$ctrl.logHtml"></div>\n'},"./src/app/exam/build/build-console/build-console.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/build/build-details.component.html":function(e,t){e.exports='{{\n  activeTestClassName = $ctrl.activeTestClassName;\n  activeTestMethod = $ctrl.activeTestMethod;\n  build = $ctrl.build;\n  \'\'\n}}\n<div class="build-details" ng-show="$ctrl.isBuildVisible()">\n  <div class="row">\n    <div class="col-sm-5">\n      <h4 ng-show="build.result.totalTestsCount > 0">\n        <span class="color-danger">Failed tests: {{ build.result.failedTestsCount }}</span>,\n        <span class="color-success">Passed tests: {{ build.result.passedTestsCount }}</span>,\n        Total: {{ build.result.totalTestsCount }} tests\n      </h4>\n      <ul class="test-results-classes" ng-show="build.result.testClasses">\n          <li ng-repeat="testClass in build.result.testClasses"\n              ng-class="{ \'active\' : $ctrl.isTestClassActive(testClass) }"\n              ng-click="$ctrl.toggleTestClass(testClass)">\n            <span class="fa" ng-class="{ \'fa-caret-right\' : !$ctrl.isTestClassActive(testClass), \'fa-caret-down\' : $ctrl.isTestClassActive(testClass) }"></span>\n            <span class="test-class-name">{{ testClass.name }}</span>\n            <span class="text-danger failed-tests-count" ng-show="testClass.failedCount > 0">({{ testClass.failedCount }} failed)</span>\n            <span class="fa fa-check color-success" ng-show="testClass.failedCount === 0"></span>\n            <ul class="test-results-methods" ng-show="$ctrl.isTestClassActive(testClass)">\n              <li ng-repeat="method in testClass.methods"\n                  ng-class="{ \'active\' : $ctrl.isTestMethodActive(testClass, method) }" ng-click="$ctrl.activateTestMethod(testClass,method, $event)">\n                <span class="test-method-name"><i class="fa" ng-class="{ \'fa-check-circle text-success\' : !method.failed, \'fa-times-circle text-danger\' : method.failed}" aria-hidden="true"></i> {{ method.name }}</span>\n              </li>\n            </ul>\n          </li>\n        </ul>\n    </div>\n    <div class="col-sm-7">\n      <div class="test-method-details" ng-if="activeTestMethod">\n        <h5>{{ activeTestClassName }}</h5>\n        <h4 title="{{ activeTestMethod.name }}">{{ activeTestMethod.name }}</h4>\n        <pre ng-if="activeTestMethod.failed" class="color-danger">{{ activeTestMethod.message }}</pre>\n        <p ng-if="!activeTestMethod.failed" class="color-success">\n          <i class="fa fa-check" aria-hidden="true"></i> Test passed, no details available\n        </p>\n      </div>\n    </div>\n  </div>\n</div>\n'},"./src/app/exam/build/build-details.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/build/build-panel.component.html":function(e,t){e.exports='<div class="build-panel">\n  <div class="build-console-wrapper">\n    <exam-build-console ng-if="$ctrl.lastBuild" build="$ctrl.lastBuild"></exam-build-console>\n\n    <div class="px-2 py-5 text-center" ng-show="!$ctrl.lastBuild && !$ctrl.lastBuild.isInProgress()">\n      <button dvsk-button class="mx-1" ng-click="$ctrl.buildProject()">\n        <i class="fa fa-play-circle" aria-hidden="true"></i>\n        <span>{{ $ctrl.isQuickBuildSupported() ? \'Build project (Full)\' : \'Build project\' }}</span>\n      </button>\n      <button dvsk-button class="mx-1" ng-click="$ctrl.quickBuildProject()" ng-if="$ctrl.isQuickBuildSupported()">\n        <i class="fa fa-play-circle" aria-hidden="true"></i>\n        <span>Build project (Quick - tests only)</span>\n      </button>\n    </div>\n  </div>\n</div>\n'},"./src/app/exam/build/build-panel.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/build/build-project-button.directive.html":function(e,t){e.exports='<i class="fa fa-play-circle" aria-hidden="true"></i>\n<span ng-if="!$ctrl.isBuildInProgress() && !$ctrl.isQuickBuildSupported()">Build & run tests</span>\n<span ng-if="!$ctrl.isBuildInProgress() && $ctrl.isQuickBuildSupported() && $ctrl.quickBuild">Run quick build (tests only)</span>\n<span ng-if="!$ctrl.isBuildInProgress() && $ctrl.isQuickBuildSupported() && !$ctrl.quickBuild">Run full build</span>\n<span ng-if="$ctrl.isBuildInProgress()">Build in progress...</span>\n'},"./src/app/exam/build/sql-build-panel/sql-build-panel.component.html":function(e,t){e.exports='{{\n  lastBuild = $ctrl.lastBuild;\n  \'\'\n}}\n<div class="build-panel sql-console">\n  <div class="build-console-wrapper">\n    <exam-build-console-loader ng-if="lastBuild.isInProgress()"></exam-build-console-loader>\n\n    <div class="px-2 py-5 text-center" ng-show="!lastBuild">\n      <button dvsk-button ng-click="$ctrl.buildProject()">\n        <i class="fa fa-play-circle" aria-hidden="true"></i>\n        <span>Run & validate</span>\n      </button>\n    </div>\n    <div class="sql-result" ng-show="lastBuild && !lastBuild.isInProgress()">\n      <div class="clearfix">\n        <button dvsk-button class="mt-n1 float-right" ng-click="$ctrl.buildProject()">\n          <i class="fa fa-play-circle" aria-hidden="true"></i>\n          <span>Run & validate</span>\n        </button>\n        <span class="d-block pt-2">\n          Status:\n          <strong class="color-warning" ng-show="lastBuild.isTestFailure() && !lastBuild.isSqlQueryError()">\n            Validation failed\n          </strong>\n          <strong class="color-danger" ng-show="lastBuild.isFailure() || lastBuild.isSqlQueryError()">\n            Error\n          </strong>\n          <strong class="color-success" ng-show="lastBuild.isSuccess()">\n            Success\n          </strong>\n        </span>\n      </div>\n\n      <div class="sql-build-details-wrapper" ng-show="lastBuild.getSqlTestResult()">\n        <code\n          class="color-danger"\n          ng-show="lastBuild.isSqlQueryError() && !lastBuild.getSqlQueryResult() && !lastBuild.getSqlExpectedResult()"\n        >{{ lastBuild.getSqlErrorMessage() }}</code>\n        <div class="build-details" ng-if="lastBuild.getSqlQueryResult() || lastBuild.getSqlExpectedResult()">\n          <div class="row">\n            <div class="col-sm-6">\n              <h4>Query results</h4>\n              <code\n                class="color-danger"\n                ng-show="lastBuild.isSqlQueryError() && (lastBuild.getSqlQueryResult() || lastBuild.getSqlExpectedResult())"\n              >{{ lastBuild.getSqlErrorMessage() }}</code>\n              <p ng-show="!lastBuild.getSqlQueryResult()">No results found</p>\n              <table ng-show="lastBuild.getSqlQueryResult().length" aria-label="Query results">\n                <thead class="sr-only">\n                  <tr>\n                    <th colspan="{{ lastBuild.getSqlQueryResult().length }}" scope="col">Query results</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr ng-repeat="row in lastBuild.getSqlQueryResult() track by $index">\n                    <td ng-repeat="col in row track by $index">{{ col }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div class="col-sm-6">\n              <h4>Expected results</h4>\n              <p ng-show="!lastBuild.getSqlExpectedResult()">No results found</p>\n              <table ng-show="lastBuild.getSqlExpectedResult().length" aria-label="Expected results">\n                <thead class="sr-only">\n                  <tr>\n                    <th colspan="{{ lastBuild.getSqlExpectedResult().length }}" scope="col">Expected results</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr ng-repeat="row in lastBuild.getSqlExpectedResult() track by $index">\n                    <td ng-repeat="col in row track by $index">{{ col }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="sql-error sql-build-details-wrapper" ng-show="lastBuild && !lastBuild.getSqlTestResult() && lastBuild.isTestFailure()">\n      <strong class="color-danger">Internal Server Error:</strong>\n      <code>{{ lastBuild.result.details[0].message | json }}</code>\n    </div>\n  </div>\n</div>\n'},"./src/app/exam/comments/comments-panel.component.html":function(e,t){e.exports='<div class="comments-panel">\n  <div class="block-flat comments-container">\n    <div class="header">\n      <h3>Comments</h3>\n    </div>\n    <div class="content" style="display: block;">\n\n      <div class="comments-panel-content">\n        <div class="alert alert-info alert-white rounded am-fade" ng-show="!$ctrl.isSpectator()">\n          <div class="icon"><i class="fa fa-info-circle" aria-hidden="true"></i></div>\n          Select a code fragment that you would like to comment on and press \'c\' to add a comment.\n        </div>\n\n        <div class="list-group" id="comments-list">\n          <div ng-click="$ctrl.goTo(comment)" class="fd-tile detail clean am-fade-and-scale" ng-repeat="comment in $ctrl.comments"\n               ng-class="{\'comment-edit-mode\' : comment.editMode}">\n\n            <div class="content"><p>{{ comment.text }}</p></div>\n            <small ng-show="comment.hidden"><i class="fa fa-eye-slash" aria-hidden="true"></i> The comment is hidden. Click to show it.</small>\n            <div class="icon"><i class="fa fa-comment-o" aria-hidden="true"></i></div>\n\n            <a href class="details">\n              <i class="fa fa-file" aria-hidden="true"></i>\n              <strong>File: </strong>\n              {{ $ctrl.getFileName(comment.fileHash) }}:{{ comment.startLine + 1 }}-{{ comment.endLine + 1 }}\n              <span><i class="fa fa-arrow-circle-right pull-right" aria-hidden="true"></i></span>\n            </a>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n'},"./src/app/exam/editor/code-violation.component.html":function(e,t){e.exports='<div class="code-violation-marker">Clean code rule violation</div>\n<div class="code-violation-body">\n  <div class="code-violation-severity" ng-class="$ctrl.violationClass">{{ $ctrl.violation.severity }}</div>\n  <div class="code-violation-content">\n    <span ng-if="!$ctrl.violationDescription">{{ $ctrl.violation.rule }}</span>\n    <span ng-if="$ctrl.violationDescription">{{ $ctrl.violationDescription }}</span>\n  </div>\n</div>\n'},"./src/app/exam/editor/code-violation.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/editor/confirm-close-modified-file.component.html":function(e,t){e.exports='<div class="modal-header">\n  <button type="button" class="close" ng-click="$ctrl.dismiss()">&times;</button>\n  <h4 class="modal-title">File modification detected</h4>\n</div>\n<div class="modal-body">\n  <p>Do you want to save the changes you made to <strong>{{ $ctrl.file.name }}</strong>?</p>\n  <p>Your changes will be lost if you don\'t save them.</p>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-default" ng-click="$ctrl.dismiss()">Cancel</button>\n  <button type="button" class="btn btn-default" click-with-promise="$ctrl.revertFile()" disable-siblings="true" on-success="$ctrl.close()">\n    <i class="fa fa-undo" aria-hidden="true"></i> Revert changes\n  </button>\n  <button type="button" class="btn btn-primary" click-with-promise="$ctrl.saveFile()" disable-siblings="true" on-success="$ctrl.close()">\n    <i class="fa fa-save" aria-hidden="true"></i> Save changes\n  </button>\n</div>\n'},"./src/app/exam/editor/exam-code-editor.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("./node_modules/angular/index.js"),o=(n("./node_modules/angular-hotkeys/build/hotkeys.js"),n("./src/common/code-editor/index.ts")),s=n("./src/common/code-review/code-review.module.ts"),r={selector:"codeViolation",template:n("./src/app/exam/editor/code-violation.component.html"),styles:[n("./src/app/exam/editor/code-violation.component.less")],bindings:{violation:"<"},controller:function(){function e(){}return e.prototype.$doCheck=function(){var e=this.violation;this.violationClass=e?"code-violation-severity-"+e.severity.toLowerCase():null,this.violationDescription=String(e.description||"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},e}()},a=i.module("exam.codeViolation",[]).component(r.selector,r).name,l=n("./src/common/code-review/comment-service.ts"),c=i.module("exam.codeEditor",["cfp.hotkeys",o.a,s.a,a,l.a]).name},"./src/app/exam/files/exam-file-tree.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("./node_modules/angular/index.js"),o=n("./src/common/files/file-tree/index.ts"),s={selector:"newFileModal",template:n("./src/app/exam/files/new-file-modal.component.html"),bindings:{location:"<",locationHash:"<",directoryMode:"<",modalInstance:"<",dismiss:"&"},controller:function(){function e(e,t){this.$timeout=e,this.FileService=t,this.useOptimisticCreateFile=!0,this.fileNamePattern={test:function(e){return/^[a-zA-Z0-9\.\-_]+$/.test(e)&&!String(e).includes("..")}}}return e.$inject=["$timeout","FileService"],e.prototype.createFile=function(e){var t=this;if(!e.$invalid&&!this.pending){var n=this.FileService;return this.pending=!0,this.useOptimisticCreateFile?(n.optimisticCreateFile(this.location,this.filename,this.locationHash,this.directoryMode),this.$timeout(function(){var e;t.pending=!1,null===(e=t.modalInstance)||void 0===e||e.close()},500)):n.createFile(this.location,this.filename,this.locationHash,this.directoryMode).then(function(e){var n;return null===(n=t.modalInstance)||void 0===n||n.close(),e}).finally(function(){t.pending=!1})}},e}()},r=i.module("exam.files.fileTree",[o.a]).component(s.selector,s).name},"./src/app/exam/files/modified-files-modal.component.html":function(e,t){e.exports='<div class="modal-header">\n  <button type="button" class="close" ng-click="$ctrl.dismiss()">&times;</button>\n  <h4 class="modal-title">Modified files detected</h4>\n</div>\n<div class="modal-body">Some files have been modified. Do you want to save all the changes and proceed?</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-default btn-sm" ng-click="$ctrl.dismiss()">Cancel</button>\n  <button\n    type="button" class="btn btn-default" click-with-promise="$ctrl.revertFiles()" disable-siblings="true"\n    on-success="$ctrl.close()"\n  >\n    <i class="fa fa-undo" aria-hidden="true"></i> Revert changes & proceed\n  </button>\n  <button\n    type="button" class="btn btn-primary" click-with-promise="$ctrl.saveFiles()" disable-siblings="true"\n    on-success="$ctrl.close()"\n  >\n    <i class="fa fa-save" aria-hidden="true"></i> Save changes & proceed\n  </button>\n</div>\n'},"./src/app/exam/files/new-file-modal.component.html":function(e,t){e.exports='<div class="modal-header">\n  <button type="button" class="close" ng-click="$ctrl.dismiss()" title="Close">&times;</button>\n  <h4 class="modal-title">\n    <span ng-show="!$ctrl.directoryMode">New file</span>\n    <span ng-show="$ctrl.directoryMode">New directory</span>\n  </h4>\n</div>\n<div class="modal-body form">\n  <form class="form-horizontal" ng-submit="$ctrl.createFile(newFileForm)" name="newFileForm">\n    <div class="form-group"\n         ng-class="{\'has-error\': newFileForm.newFileName.$invalid && newFileForm.newFileName.$dirty, \'has-success\' : newFileForm.newFileName.$valid && newFileForm.newFileName.$dirty }">\n      <label class="col-sm-4 control-label" for="newFileName">\n        <span ng-show="!$ctrl.directoryMode">File name</span>\n        <span ng-show="$ctrl.directoryMode">Directory name</span>\n      </label>\n\n      <div class="col-sm-8">\n        <input type="text" id="newFileName" placeholder="Enter file name" ng-model="$ctrl.filename" name="newFileName"\n               required class="form-control" ng-pattern="$ctrl.fileNamePattern" autocomplete-off autofocus />\n        <span class="error" ng-show="newFileForm.newFileName.$error.pattern">Incorrect file name!</span>\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-sm-4 control-label">Location</label>\n\n      <div class="col-sm-8">\n        <p class="form-control-static detail-content" ng-bind="$ctrl.location"></p>\n\n      </div>\n\n    </div>\n\n  </form>\n\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-default" ng-click="$ctrl.dismiss()">Cancel</button>\n  <button type="button" class="btn btn-primary" click-with-promise="$ctrl.createFile(newFileForm)" disable-siblings="true"\n          ng-disabled="newFileForm.$invalid || $ctrl.pending">\n    <i class="fa" aria-hidden="true" ng-class="{ \'fa-check\': !$ctrl.pending, \'fa-refresh fa-spin\': $ctrl.pending }"></i> Create file\n  </button>\n</div>\n'},"./src/app/exam/steps/code-edit/building-instructions.component.html":function(e,t){e.exports='<div class="building-instructions" ng-if="$ctrl.canShowInstructions()">\n  <h3>How to build a project</h3>\n  <p>It is possible to build the project at any time by clicking the <strong>Build & run tests</strong> button below (in the build console).<br/>\n    <span ng-if="$ctrl.canShowCommands()">You can also build the project locally by executing the following commands:</span>\n  </p>\n  <pre ng-if="$ctrl.canShowCommands()"><code>{{ $ctrl.getInstructions() }}</code></pre>\n</div>\n'},"./src/app/exam/steps/code-edit/code-edit-toolbar.component.html":function(e,t){e.exports='<div class="pull-left action-buttons">\n  <button\n    type="button" class="toolbar-btn"\n    ng-if="$ctrl.isIdeMode()"\n    ng-disabled="!$ctrl.isModified()"\n    uib-tooltip="Save current file" tooltip-append-to-body="true"\n    click-with-promise="$ctrl.saveFile()"\n    disable-siblings="true"\n  >\n    <i class="fa fa-save" aria-hidden="true"></i>\n    <span class="long-label">Save file</span>\n    <span class="label">Save</span>\n  </button>\n  <button\n    type="button" class="toolbar-btn"\n    ng-if="$ctrl.isIdeMode()"\n    ng-disabled="!$ctrl.isModified()"\n    uib-tooltip="Revert changes for current file" tooltip-append-to-body="true"\n    click-with-promise="$ctrl.revertFile()" disable-siblings="true"\n  >\n    <i class="fa fa-undo" aria-hidden="true"></i>\n    <span class="long-label">Revert changes</span>\n    <span class="label">Revert</span>\n  </button>\n\n  <button\n    type="button" class="toolbar-btn"\n    ng-if="$ctrl.isIdeMode() && ($ctrl.isDownloadModeEnabled() || $ctrl.isGitModeEnabled())"\n    uib-tooltip="Refresh project code with latest saved version" tooltip-append-to-body="true"\n    click-with-promise="$ctrl.refreshProject()" disable-siblings="true"\n  >\n    <i class="fa fa-refresh" aria-hidden="true"></i>\n    <span class="long-label">Refresh project</span>\n    <span class="label">Refresh</span>\n  </button>\n\n  <button build-project-button task="$ctrl.task" ng-if="!$ctrl.isSpectator()" class="toolbar-btn"></button>\n  <button build-project-button task="$ctrl.task" ng-if="!$ctrl.isSpectator() && $ctrl.isQuickBuildSupported()" quick-build="true" class="toolbar-btn"></button>\n</div>\n\n<div class="pull-right" ng-if="!$ctrl.isSpectator()">\n  <div class="fetch-code-buttons" ng-if="$ctrl.isModeChooserEnabled()" id="fetch-code-buttons">\n    <button\n      type="button" class="toolbar-btn clone-repo" id="ide-mode-button"\n      ng-if="$ctrl.isProgrammingModeEnabled()"\n      uib-tooltip="Switch to in-browser editor" tooltip-append-to-body="true"\n      click-with-promise="$ctrl.switchToProgrammingMode()"\n    >\n      <i class="fa dskicn-window-edit" aria-hidden="true"></i>\n      <span class="label">IDE</span>\n    </button>\n    <button\n      type="button" class="toolbar-btn clone-repo" id="clone-repo-button"\n      ng-if="$ctrl.isGitModeEnabled()"\n      ng-click="$ctrl.switchToGitMode()"\n      uib-tooltip="Clone Git repository" tooltip-append-to-body="true"\n    >\n      <i class="fa fa-code-fork" aria-hidden="true"></i>\n      <span class="label">Git</span>\n    </button>\n    <button\n      type="button" class="toolbar-btn download-code" id="download-code-button"\n      ng-if="$ctrl.isDownloadModeEnabled()"\n      ng-click="$ctrl.switchToDownloadMode()"\n      uib-tooltip="Download ZIP with code" tooltip-append-to-body="true"\n    >\n      <i class="fa fa-download" aria-hidden="true"></i>\n      <span class="label">Download</span>\n    </button>\n  </div>\n</div>\n'},"./src/app/exam/steps/code-edit/code-edit-toolbar.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/steps/code-edit/coding-step.component.html":function(e,t){e.exports='<div class="step-pane-content code-edit-page" ng-class="{\'with-mode-selector\' : !$ctrl.isModeSelected() }">\n  <programming-task-mode-selector\n    ng-if="!$ctrl.isModeSelected()"\n    switch-to-download-mode="$ctrl.switchToDownloadMode()"\n    switch-to-programming-mode="$ctrl.switchToProgrammingMode()"\n    switch-to-git-mode="$ctrl.switchToGitMode()"\n    in-overtime-mode="$ctrl.inOvertimeMode"\n    exam="$ctrl.exam"\n    task="$ctrl.task"\n    class="programming-task-mode-selector"\n  ></programming-task-mode-selector>\n  <programming-task-editor\n    task="$ctrl.task"\n    layout="$ctrl.layout"\n    coding-mode="$ctrl.codingMode"\n    refresh-project="$ctrl.refreshProject()"\n    in-overtime-mode="$ctrl.inOvertimeMode"\n    switch-to-download-mode="$ctrl.switchToDownloadMode(true)"\n    switch-to-programming-mode="$ctrl.switchToProgrammingMode()"\n    switch-to-git-mode="$ctrl.switchToGitMode(true)"\n    ng-if="$ctrl.isModeSelected()"\n  ></programming-task-editor>\n</div>\n'},"./src/app/exam/steps/code-edit/coding-step.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/steps/code-edit/download-mode/download-mode.component.html":function(e,t){e.exports='<section class="download-mode__panel">\n  <h2 class="download-mode__panel-title">2. Download task code</h2>\n  <div class="download-mode__panel-body">\n    <p>Download the project source code as a ZIP archive and edit it locally using your favourite IDE.</p>\n\n    <p class="download-mode__alert">\n      <strong class="important text-uppercase">Important!</strong><br/>\n      Publishing the task on public Git hosting services such as GitHub, GitLab, or Bitbucket is prohibited.\n    </p>\n\n    <a href="{{ $ctrl.codePackageUrl }}" dvsk-button full-width\n      ng-disabled="$ctrl.task.limitedAccess"\n      ng-click="$ctrl.startDownload(this)"\n      target="_blank"\n    >\n      <i class="fa fa-arrow-down" aria-hidden="true"></i>\n      <span>Download code</span>\n    </a>\n\n    <div class="download-mode__alert is-danger mt-3" ng-if="$ctrl.task.limitedAccess">\n      Code download is disabled due to limited task access.\n    </div>\n\n    <exam-building-instructions task="$ctrl.task" class="d-block mt-4"></exam-building-instructions>\n\n    <div ng-if="$ctrl.hasReadOnlyPatterns()" class="mt-4">\n      <h3>Read-only files</h3>\n      <p>The task author might have marked some of the project files as read-only. Any changes to files matching the following patterns will be ignored.</p>\n      <pre><code ng-repeat="pattern in $ctrl.readOnlyPatterns">{{ pattern }}{{ \'\\n\' }}</code></pre>\n    </div>\n  </div>\n</section>\n\n<section class="download-mode__panel">\n  <h2 class="download-mode__panel-title">\n    3. Upload ZIP file <small class="font-weight-normal" style="color: #808a94;">before the time is up</small>\n  </h2>\n  <div class="download-mode__panel-body">\n    <p>\n      Upload a ZIP archive with your modified files. Each new upload will overwrite previous versions.\n    </p>\n\n    <p>\n      The uploaded ZIP file must contain a <code>devskiller.marker</code> file in the\n      same location as in the downloaded ZIP archive.\n      <strong style="color: #fb4c2f;">Do not delete this file from the downloaded archive.</strong>\n    </p>\n\n    <p>\n      The ZIP file with your solution must be <strong>5 MB or less</strong>.\n      Remember to remove all build artifacts, external dependencies, and libraries\n      - the ZIP file should only contain the source code.\n    </p>\n  </div>\n\n  <div ng-if="$ctrl.fileUpload.isSuccess" class="download-mode__panel-footer download-mode__panel-footer--success">\n    <span title="{{ $ctrl.fileUpload.file.name }}">File</span> uploaded successfully\n    <span am-time-ago="$ctrl.fileUpload.completedAt" title="{{ $ctrl.fileUpload.completedAt | localDateTime }}" class="font-weight-normal">\n      on {{ $ctrl.fileUpload.completedAt | localDateTime }}\n    </span>\n  </div>\n\n  <div ng-if="$ctrl.fileUpload.isPending" class="download-mode__panel-footer download-mode__panel-footer--progress">\n    <p>\n      Uploading file <strong>{{ $ctrl.fileUpload.file.name }}</strong> &hellip;\n    </p>\n    <div class="progress progress-striped active">\n      <div ng-style="$ctrl.progressBarStyle()" class="progress-bar progress-bar-success">\n        {{ $ctrl.fileUpload.progress }}%\n      </div>\n    </div>\n  </div>\n\n  <div\n    ng-if="!$ctrl.fileUpload.isPending"\n    class="download-mode__panel-footer download-mode__panel-footer--dropzone"\n    ng-class="{ \'is-active\': $ctrl.shouldShowDropzone }"\n  >\n    <p>Drop your <strong>.ZIP</strong> file anywhere on the page</p>\n    <p>\n      <span class="mr-2">or</span>\n      <dvsk-file-button on-file-select="$ctrl.onFileSelect($files)" size="sm">\n        <i class="fa fa-folder-open" aria-hidden="true"></i>\n        <span>Choose .ZIP file...</span>\n      </dvsk-file-button>\n    </p>\n  </div>\n</section>\n\n<div ng-if="$ctrl.shouldShowDropzone" ngf-drop="$ctrl.onFileSelect($files)" class="download-mode-dropzone"></div>\n'},"./src/app/exam/steps/code-edit/download-mode/download-mode.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/steps/code-edit/excel-mode/excel-mode.component.html":function(e,t){e.exports='<div class="tab-container git-mode">\n  <ul class="nav nav-tabs">\n    <li class="active">\n      <a href>\n        <i class="dskicn dskicn-code-fork" aria-hidden="true"></i>\n        <span>Excel task</span>\n      </a>\n    </li>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane cont active">\n      <div class="header">\n        <h3>Excel task</h3>\n\n        <p class="push-20">\n          Open your Excel Web App session in a separate tab with the button below.\n          Read the task description thoroughly and solve your task before the time ends.\n        </p>\n\n        <p class="text-center">\n          <a dvsk-button href="{{ $ctrl.task.vmResource.loginUrl }}" target="_blank" rel="noopener noreferrer">\n            Open Excel Web App\n            <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>\n          </a>\n        </p>\n\n        <hr />\n\n        <p class="color-danger push-10-t">\n          <strong>Important:</strong> Please be aware of the remaining time as once it is has expired we will terminate your session.\n        </p>\n      </div>\n    </div>\n  </div>\n</div>\n'},"./src/app/exam/steps/code-edit/git-mode.component.html":function(e,t){e.exports='<div class="tab-container git-mode">\n  <ul class="nav nav-tabs">\n    <li class="active">\n      <a href>\n        <i class="dskicn dskicn-code-fork" aria-hidden="true" style="width: 24px; text-align: center; font-size: 16px;"></i>\n        <span>Working with a GIT repository</span>\n      </a>\n    </li>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane cont active">\n      <div class="alert alert-warning alert-block font-s15">\n         <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n         <strong>Attention!</strong> Push the changes to the repository before the time is up as it will not be possible afterwards.\n       </div>\n\n      <p>\n        <strong class="color-warning">The use of public Git hosting services such as GitHub, GitLab, or Bitbucket is prohibited.</strong>\n      </p>\n      <div class="row">\n        <div class="col-md-6">\n          <h3>Clone a GIT repository</h3>\n          <p>You can clone a Git repository with the source code of this project and edit it in your favourite IDE.</p>\n\n          <div ng-if="!$ctrl.task.limitedAccess">\n\n            <div class="input-group">\n                <input class="form-control" disabled ng-model="$ctrl.clone.command" type="text">\n                <div class="input-group-btn">\n                  <copy-command-button command="$ctrl.clone.command"></copy-command-button>\n                </div>\n            </div>\n            <div class="text-center push-10-t">\n            </div>\n          </div>\n          <div class="alert alert-warning alert-block" ng-if="task.limitedAccess">\n            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Git repository is disabled due to limited task access!\n          </div>\n\n          <h3>Commit &amp; push your changes</h3>\n          <p>\n            Remember to commit and push your changes to the git repository. You must push your changes to the <code>master</code>\n            branch. You are not allowed to push new branches to the repository.<br/><br/>\n\n            You can use following commands to send your changes:\n          <pre><code>git add .\ngit commit -m "Solution"\ngit push origin master</code></pre>\n          </p>\n        </div>\n        <div class="col-md-6">\n          <exam-building-instructions task="$ctrl.task"></exam-building-instructions>\n          <div ng-if="$ctrl.hasReadOnlyPatterns()">\n            <h3>Read-only files</h3>\n            The task author might have marked some of the project files as read-only. Any commits that contain changes to\n            files matching the following patterns will be rejected!\n            <pre><code>{{ $ctrl.joinedReadOnlyPatterns() }}</code></pre>\n          </div>\n        </div>\n      </div>\n\n\n    </div>\n  </div>\n\n</div>\n'},"./src/app/exam/steps/code-edit/programming-task-editor.component.html":function(e,t){e.exports='<code-edit-toolbar\n  task="$ctrl.task"\n  coding-mode="$ctrl.codingMode"\n  in-overtime-mode="$ctrl.inOvertimeMode"\n  ng-if="$ctrl.codingMode === \'IDE\' || $ctrl.codingMode === \'GIT\' || $ctrl.codingMode === \'DOWNLOAD\'"\n  switch-to-download-mode="$ctrl.switchToDownloadMode()"\n  switch-to-programming-mode="$ctrl.switchToProgrammingMode()"\n  switch-to-git-mode="$ctrl.switchToGitMode()"\n  refresh-project="$ctrl.refreshProject()"\n></code-edit-toolbar>\n<div class="panels-container">\n  <div class="left-sidebar" id="left-sidebar" resizable r-directions="[\'right\']" r-width="$ctrl.layoutManager.sidebarWidth">\n    <div class="collapsed-file-tree" ng-click="$ctrl.layoutManager.showSidebar()" ng-if="$ctrl.layout.fileTreeVisible">\n      <div class="show-file-tree-button">Project files</div>\n    </div>\n    <div class="files-tree" id="files-tree" ng-if="$ctrl.layout.fileTreeVisible">\n\n      <div class="block-flat">\n        <button type="button" class="header header-mobile" ng-click="$ctrl.layoutManager.toggleSidebar()">\n          <h3><i class="fa fa-lg fa-fw fa-files-o" aria-hidden="true"></i> Project files</h3>\n        </button>\n        <div class="header">\n          <span class="fa fa-angle-double-left pull-right" ng-click="$ctrl.layoutManager.collapseSidebar()" uib-tooltip="Hide"\n                tooltip-append-to-body="true"></span>\n          <h3>Project files</h3>\n        </div>\n        <div class="content">\n          <div class="sidebar-button-wrapper">\n            <small><i class="fa fa-info-circle" aria-hidden="true"></i> Right click on node for context menu</small>\n          </div>\n          <file-tree context-menu="true"></file-tree>\n        </div>\n      </div>\n    </div>\n\n\n    <div class="collapsed-problem-description" ng-click="$ctrl.layoutManager.showSidebar()" ng-if="$ctrl.layout.descriptionAtSidebar">\n      <div class="show-problem-description-button">\n        <span ng-if="$ctrl.codingMode === \'DOWNLOAD\'">1.</span>\n        Task description\n      </div>\n    </div>\n    <div class="problem-description-panel" ng-if="$ctrl.layout.descriptionAtSidebar">\n\n      <div class="block-flat">\n        <button type="button" class="header header-mobile" ng-click="$ctrl.layoutManager.toggleSidebar()">\n          <h3>\n            <i class="fa fa-lg fa-fw fa-list-alt" aria-hidden="true"></i>\n            <span ng-if="$ctrl.codingMode === \'DOWNLOAD\'">1.</span>\n            Task description\n          </h3>\n        </button>\n        <div class="header">\n          <div class="pull-right" role="button" aria-label="Toggle description" ng-click="$ctrl.layoutManager.toggleSidebar()" style="height: 100%; padding: .5em;">\n            <i class="fa fa-angle-double-left" aria-hidden="true"></i>\n          </div>\n          <h3>\n            <i class="fa fa-lg fa-fw fa-list-alt" aria-hidden="true"></i>\n            <span ng-if="$ctrl.codingMode === \'DOWNLOAD\'">1.</span>\n            Task description\n          </h3>\n        </div>\n        <div class="content">\n          <div id="task-definition">\n            <div class="question-text" render-markdown="$ctrl.task.question"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="main-content" id="main-panel"\n       ng-class="{ \'without-build-panel\' : !$ctrl.task.compilable || $ctrl.inOvertimeMode }" resizable\n       r-directions="[\'bottom\']">\n    <div class="expand-editor-button fa fa-expand" ng-click="$ctrl.layoutManager.expandMainPanel()" ng-show="!$ctrl.layoutManager.isMainPanelExpanded()"\n         uib-tooltip="Expand editor" tooltip-placement="left" tooltip-append-to-body="true"></div>\n    <div class="expand-editor-button fa fa-compress" ng-click="$ctrl.layoutManager.compressMainPanel()" ng-show="$ctrl.layoutManager.isMainPanelExpanded()"\n         uib-tooltip="Collapse editor" tooltip-placement="left" tooltip-append-to-body="true"></div>\n    <div class="main-content-wrapper">\n      <div ng-intro-method="showCodeEditingTour" ng-intro-autostart="true" ng-intro-options="tourOptions"></div>\n      <tabbed-editor-container task="$ctrl.task" ng-if="$ctrl.codingMode === \'IDE\'" task-definition-visible="$ctrl.layout.descriptionAtMainPanel">\n        <code-editor class="code-editor-wrapper"></code-editor>\n      </tabbed-editor-container>\n      <git-mode task="$ctrl.task" ng-if="$ctrl.codingMode === \'GIT\'" ></git-mode>\n      <download-mode task="$ctrl.task" ng-if="$ctrl.codingMode === \'DOWNLOAD\'" ></download-mode>\n      <sfscratch-mode task="$ctrl.task" ng-if="$ctrl.codingMode === \'SFSCRATCH\'"></sfscratch-mode>\n      <excel-mode task="$ctrl.task" ng-if="$ctrl.codingMode === \'EXCEL\'"></excel-mode>\n    </div>\n  </div>\n\n  <div class="build-panel-wrapper">\n    <div ng-if="$ctrl.task.compilable && !$ctrl.inOvertimeMode">\n      <div class="build-panel-toolbar">\n        <ul class="build-panel-tabs" role="tablist">\n          <li\n            class="build-panel-tab" role="presentation"\n            ng-class="{\n              \'is-disabled\': !$ctrl.lastBuild,\n              \'is-active\': $ctrl.tabs.is(\'build-console\')\n            }"\n          >\n            <a\n              id="build-console-tab" href="#build-console"\n              role="tab" aria-controls="build-console" aria-selected="{{ $ctrl.tabs.is(\'build-console\') }}"\n              ng-click="$event.preventDefault(); $ctrl.tabs.show(\'build-console\')"\n            >\n              <i class="fa fa-terminal" aria-hidden="true"></i>\n              Build console\n              <i\n                class="fa fa-exclamation-triangle color-warning"\n                ng-if="$ctrl.lastBuild.isTestFailure()"\n                aria-label="Last build: Tests failed"\n                uib-tooltip="Last build: Tests failed"\n                tooltip-append-to-body="true"\n                aria-hidden="true"\n              ></i>\n              <i\n                class="fa fa-times-circle color-danger"\n                ng-if="$ctrl.lastBuild.isFailure()"\n                uib-tooltip="Last build: failed" tooltip-append-to-body="true"\n                aria-label="Last build: failed"\n                aria-hidden="true"\n              ></i>\n              <i\n                class="fa fa-check-circle color-success"\n                ng-if="$ctrl.lastBuild.isSuccess()"\n                uib-tooltip="Last build: Success!" tooltip-append-to-body="true"\n                aria-label="Last build: Success!"\n                aria-hidden="true"\n              ></i>\n            </a>\n          </li>\n          <li\n            class="build-panel-tab" role="presentation"\n            ng-class="{\n              \'is-disabled\': !$ctrl.lastBuild.result.totalTestsCount,\n              \'is-active\': $ctrl.tabs.is(\'test-results\')\n            }"\n          >\n            <a\n              id="test-results-tab" href="#test-results"\n              role="tab" aria-controls="test-results" aria-selected="{{ $ctrl.tabs.is(\'test-results\') }}"\n              ng-click="$event.preventDefault(); $ctrl.lastBuild.result.totalTestsCount && $ctrl.tabs.show(\'test-results\')"\n            >\n              <i class="fa fa-flash" aria-hidden="true"></i>\n              Test results\n              <span\n                class="badge"\n                ng-if="$ctrl.lastBuild.result.totalTestsCount"\n                ng-class="{\n                  \'badge-success\': $ctrl.lastBuild.result.failedTestsCount === 0,\n                  \'badge-warning\': $ctrl.lastBuild.result.failedTestsCount > 0\n                }"\n                uib-tooltip="Tests passed" tooltip-append-to-body="true"\n              >{{$ctrl.lastBuild.result.passedTestsCount}} of {{$ctrl.lastBuild.result.totalTestsCount}}\n              </span>\n            </a>\n          </li>\n        </ul>\n        <div class="build-panel-buttons">\n          <button\n            build-project-button\n            task="$ctrl.task"\n            tabs="$ctrl.tabs"\n            tab="build-console"\n            class="toolbar-btn btn btn-primary"\n            ng-if="!$ctrl.isSpectator()"\n          ></button>\n          <button\n            build-project-button\n            task="$ctrl.task"\n            tabs="$ctrl.tabs"\n            tab="build-console"\n            class="toolbar-btn btn btn-primary"\n            ng-if="!$ctrl.isSpectator() && $ctrl.isQuickBuildSupported()"\n            quick-build="true"\n          ></button>\n\n          <button\n            type="button"\n            class="build-panel-button-toggle"\n            uib-tooltip="Toggle" tooltip-append-to-body="true"\n            ng-click="$ctrl.layoutManager.toggleBuildPanel()"\n            aria-label="Toggle build panel"\n          >\n            <i class="fa fa-angle-double-down" aria-hidden="true"></i>\n          </button>\n        </div>\n      </div>\n      <section class="build-panel-tab-pane" ng-show="$ctrl.tabs.is(\'build-console\')">\n        <build-panel task="$ctrl.task" last-build="$ctrl.lastBuild" tabs="$ctrl.tabs"></build-panel>\n      </section>\n      <section class="build-panel-tab-pane" ng-show="$ctrl.lastBuild.result.totalTestsCount && $ctrl.tabs.is(\'test-results\')">\n        <build-details task="$ctrl.task" style="height: auto;"></build-details>\n      </section>\n    </div>\n  </div>\n\n</div>\n'},"./src/app/exam/steps/code-edit/programming-task-editor.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/steps/code-edit/programming-task-mode-selector/assets/download-mode.svg":function(e,t,n){e.exports=n.p+"images/download-mode.0e7ecb6d.svg"},"./src/app/exam/steps/code-edit/programming-task-mode-selector/assets/editor-mode.svg":function(e,t,n){e.exports=n.p+"images/editor-mode.3d581bb1.svg"},"./src/app/exam/steps/code-edit/programming-task-mode-selector/assets/git-mode.svg":function(e,t,n){e.exports=n.p+"images/git-mode.3bc0817d.svg"},"./src/app/exam/steps/code-edit/programming-task-mode-selector/assets/programming-task.svg":function(e,t,n){e.exports=n.p+"images/programming-task.f7e23e1b.svg"},"./src/app/exam/steps/code-edit/programming-task-mode-selector/programming-task-mode-selector.component.html":function(e,t){e.exports='<div class="exam-page content-container">\n  <div class="exam-page__content">\n    <img dvsk-src="{{ $ctrl.images.content }}" alt="" class="exam-page__content-image" />\n\n    <div class="exam-page__content-text" ng-if="!$ctrl.inOvertimeMode">\n      <h1>Youâ€™re about to start a programming task</h1>\n      <p>\n        Choose the way you would like to edit source code of the project. You will be able to change the\n        selected mode in the top right corner at any time during the test.\n      </p>\n    </div>\n\n    <div class="exam-page__content-text" ng-if="$ctrl.inOvertimeMode">\n      <h1>How you would like to upload your overtime changes?</h1>\n    </div>\n  </div>\n</div>\n\n<div class="task-modes">\n  <div class="task-mode" ng-class="{ \'is-disabled\': !$ctrl.task.gitSolvingStrategyEnabled }">\n    <div class="task-mode-disabled" ng-if="!$ctrl.task.gitSolvingStrategyEnabled">\n      {{$ctrl.optionDisabledCopy}}\n    </div>\n    <img dvsk-src="{{ $ctrl.images.gitMode }}" alt="" />\n    <h2>Git repository</h2>\n    <p>\n      Clone a Git repository to edit the source code of the project in your favourite IDE.\n      You can build the project locally or using the browser.\n    </p>\n    <button\n      dvsk-button size="large"\n      ng-click="$ctrl.switchToGitMode()"\n      ng-disabled="$ctrl.isSpectator() || !$ctrl.task.gitSolvingStrategyEnabled"\n    >\n      Use GIT repository\n    </button>\n  </div>\n\n  <div class="task-mode" ng-class="{ \'is-disabled\': !$ctrl.task.zipSolvingStrategyEnabled }">\n    <div class="task-mode-disabled" ng-if="!$ctrl.task.zipSolvingStrategyEnabled">\n      {{$ctrl.optionDisabledCopy}}\n    </div>\n    <img dvsk-src="{{ $ctrl.images.downloadMode }}" alt="" />\n    <h2>Download / Upload code</h2>\n    <p>\n      Download a ZIP file to edit the source code of the project in your favourite IDE.\n      Remember to upload the ZIP file once you\'re done editing.\n    </p>\n    <button\n      dvsk-button size="large"\n      ng-click="$ctrl.switchToDownloadMode()"\n      ng-disabled="$ctrl.isSpectator() || !$ctrl.task.zipSolvingStrategyEnabled"\n    >\n      Download code\n    </button>\n  </div>\n\n  <div class="task-mode" ng-class="{ \'is-disabled\': !$ctrl.task.webSolvingStrategyEnabled || $ctrl.inOvertimeMode }">\n    <div class="task-mode-disabled" ng-if="!$ctrl.task.webSolvingStrategyEnabled">\n      {{$ctrl.optionDisabledCopy}}\n    </div>\n    <div class="task-mode-disabled" ng-if="$ctrl.task.webSolvingStrategyEnabled && $ctrl.inOvertimeMode">\n      Web browser mode disabled after the time is up.\n    </div>\n    <img dvsk-src="{{ $ctrl.images.editorMode }}" alt="" />\n    <h2>In-browser editor</h2>\n    <p>\n      Use our browser-based editor to edit contents of the source code files.\n      You can also use it to build the project and see results of unit tests.\n    </p>\n    <button\n      dvsk-button size="large"\n      ng-click="$ctrl.switchToProgrammingMode()"\n      ng-disabled="$ctrl.isSpectator() || !$ctrl.task.webSolvingStrategyEnabled || $ctrl.inOvertimeMode"\n    >\n      In-browser editor\n    </button>\n  </div>\n</div>\n'},"./src/app/exam/steps/code-edit/programming-task-mode-selector/programming-task-mode-selector.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/steps/code-edit/sfscratch-mode.component.html":function(e,t){e.exports='<div class="tab-container git-mode">\n  <ul class="nav nav-tabs">\n    <li class="active">\n      <a href>\n        <i class="dskicn dskicn-code-fork" aria-hidden="true"></i>\n        <span>How do I connect?</span>\n      </a>\n    </li>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane cont active">\n      <div>\n        <div class="header">\n          <h3>How to connect</h3>\n        </div>\n\n        <p class="push-20">\n          Open your Salesforce session in a separate tab with the button below.\n          Read the task description thoroughly and solve your task before the time ends.\n        </p>\n        <button type="button" dvsk-button ng-click="$ctrl.openSalesforce()" class="center-block">\n          Open Salesforce\n          <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>\n        </button>\n\n        <hr />\n\n        <p class="no-margin">\n          <strong>NOTE:</strong> If you are having problems with opening Salesforce session it means that it might have timed out.\n          In this case use below button to refresh the link and try opening Salesforce once again.\n          <br>\n          <button type="button" class="push-10-t center-block" dvsk-button color="secondary" size="sm" ng-click="$ctrl.onRefreshUrl()">Refresh link</button>\n          <p class="text-center color-success font-s12" ng-if="$ctrl.linkRefreshed">Link to Salesforce refreshed successfully</p>\n          <p class="text-center color-danger font-s12" ng-if="$ctrl.errorMessage">{{ $ctrl.errorMessage }}</p>\n        </p>\n\n        <hr />\n\n        <p class="color-danger push-10-t">\n          <strong>Important:</strong> Please be aware of the remaining time as once it is has expired we will terminate your session.\n        </p>\n\n      </div>\n    </div>\n  </div>\n\n</div>\n'},"./src/app/exam/steps/code-review/code-review-step.component.html":function(e,t){e.exports='<div class="step-pane-content code-review-page">\n  <div class="panels-container" code-review-layout="">\n    <div class="left-sidebar" id="left-sidebar" resizable r-directions="[\'right\']" r-width="360">\n      <div class="files-tree" id="files-tree">\n\n        <div class="block-flat">\n          <div class="header">\n            <h3>Project files</h3>\n          </div>\n          <div class="content">\n            <file-tree></file-tree>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="main-content" id="main-panel">\n      <div class="main-content-wrapper">\n        <tabbed-editor-container task="$ctrl.task" readonly="true" task-definition-visible="true">\n          <exam-file-comments-editor\n            file-hash="$ctrl.getActiveFileHash()"\n            comments="$ctrl.task.comments"\n            readonly="$ctrl.isSpectator()"\n          ></exam-file-comments-editor>\n        </tabbed-editor-container>\n      </div>\n    </div>\n\n    <div class="right-sidebar" id="right-sidebar" resizable r-directions="[\'left\']" r-width="320">\n      <comments-panel page-number="$ctrl.pageNumber" comments="$ctrl.task.comments"></comments-panel>\n    </div>\n  </div>\n</div>\n'},"./src/app/exam/steps/exam-steps.module.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ExamStepsModule",function(){return Ye});var i=n("./node_modules/angular/index.js"),o=n("./src/common/code-editor/index.ts"),s={selector:"cubiksStep",template:'\n    <div class="text-center push-40-t">\n      <a ng-href="{{ $ctrl.task.testUrl }}" class="btn btn-primary btn-lg">\n        Start Personality assessment\n      </a>\n    </div>\n  ',bindings:{task:"<"},controller:function(){function e(e){this.$window=e}return e.$inject=["$window"],e.prototype.$onInit=function(){this.$window.location.href=this.task.testUrl},e.prototype.$onDestroy=function(){},e}()},r=(n("./node_modules/intro.js/intro.js"),n("./node_modules/intro.js/introjs.css"),n("./node_modules/angular-clipboard/angular-clipboard.js"),n("./node_modules/angular-intro.js/src/angular-intro.js")),a=n("./src/app/admin/shared/tasks/types.ts"),l=n("./src/common/enums-definition.ts"),c={selector:"examBuildingInstructions",template:n("./src/app/exam/steps/code-edit/building-instructions.component.html"),bindings:{task:"<"},controller:function(){function e(){}return e.prototype.$onInit=function(){var e,t=this,n=l.A[this.task.projectType];this.projectType=n||{};var i=null===(e=this.projectType.versions)||void 0===e?void 0:e.find(function(e){return e.value===t.task.projectTypeVersion});this.commands=(null==i?void 0:i.commands)||this.projectType.commands},e.prototype.canShowInstructions=function(){return this.projectType!==a.a.PLAIN},e.prototype.canShowCommands=function(){return this.commands&&this.commands.length>0&&!this.task.hasExternalComponents},e.prototype.getInstructions=function(){var e;return null===(e=this.commands)||void 0===e?void 0:e.join("\n")},e}()},d={selector:"codeEditToolbar",template:n("./src/app/exam/steps/code-edit/code-edit-toolbar.component.html"),styles:[n("./src/app/exam/steps/code-edit/code-edit-toolbar.component.less")],bindings:{task:"<",codingMode:"<",inOvertimeMode:"<",switchToGitMode:"&",switchToDownloadMode:"&",switchToProgrammingMode:"&",refreshProject:"&"},controller:function(){function e(e,t,n,i){this.examService=t,this.FileService=n,this.runtimeInfoService=i,e.addClass(e[0].tagName.toLowerCase())}return e.$inject=["$element","examService","FileService","runtimeInfoService"],e.prototype.$onInit=function(){},e.prototype.isSpectator=function(){return this.examService.isSpectator()},e.prototype.isQuickBuildSupported=function(){return this.runtimeInfoService.isQuickBuildSupported(this.task.projectType,this.task.projectTypeVersion)},e.prototype.isSingleFileMode=function(){var e=this.task;return e&&e.singleFileMode},e.prototype.isModeChooserEnabled=function(){var e=this.task,t=0;return e.zipSolvingStrategyEnabled&&t++,e.gitSolvingStrategyEnabled&&t++,e.webSolvingStrategyEnabled&&t++,t>1},e.prototype.isIdeMode=function(){return"IDE"===this.codingMode},e.prototype.isProgrammingModeEnabled=function(){var e=this.task;return!this.inOvertimeMode&&!!e.webSolvingStrategyEnabled&&!e.singleFileMode&&"IDE"!==this.codingMode},e.prototype.isGitModeEnabled=function(){var e=this.task;return!!e.gitSolvingStrategyEnabled&&!e.singleFileMode&&"GIT"!==this.codingMode},e.prototype.isDownloadModeEnabled=function(){var e=this.task;return!!e.zipSolvingStrategyEnabled&&!e.singleFileMode&&"DOWNLOAD"!==this.codingMode},e.prototype.synchronizeRepo=function(){return this.FileService.synchronizeFiles()},e.prototype.revertFile=function(){return this.FileService.revertActiveFile()},e.prototype.saveFile=function(){return this.FileService.saveActiveFile()},e.prototype.isModified=function(){return this.FileService.isActiveFileModified()},e}()},u=n("./src/common/types/task.ts"),p=n("./src/app/exam/layout/wait-dialog.component.ts"),h={selector:"codingStep",template:n("./src/app/exam/steps/code-edit/coding-step.component.html"),styles:[n("./src/app/exam/steps/code-edit/coding-step.component.less")],bindings:{exam:"<",task:"<",codingMode:"<",inOvertimeMode:"<"},controller:function(){function e(e,t,n,i,o,s){this.$q=e,this.$timeout=t,this.dialogs=n,this.examService=i,this.FileService=o,this.firebaseService=s,this.layout={fileTreeVisible:!1,descriptionAtSidebar:!1,descriptionAtMainPanel:!1,buildPanelAvailable:!1}}return e.$inject=["$q","$timeout","dialogs","examService","FileService","firebaseService"],e.prototype.$onInit=function(){var e=this;this.task.singleFileMode&&this.switchToProgrammingMode(),this.task.projectType===u.c.SFSCRATCH&&this.switchToSfScratchMode(),this.task.projectType===u.c.EXCEL&&this.switchToExcelMode();try{this.firebaseService.isEnabled()?this.initFirebaseListener():this.$timeout(function(){e.initFirebaseListener()},3e3)}catch(t){}},e.prototype.initFirebaseListener=function(){var e=this;this.firebaseService.listenToCodeEditorModeChanges(function(t){t&&t.codingMode&&t.codingMode!==e.codingMode&&("IDE"!==t.codingMode||e.inOvertimeMode?"DOWNLOAD"===t.codingMode?e.switchToDownloadMode():"GIT"===t.codingMode?e.switchToGitMode():"SFSCRATCH"===t.codingMode&&e.switchToSfScratchMode():e.switchToProgrammingMode())})},e.prototype.$onDestroy=function(){},e.prototype.isModeSelected=function(){return!!this.codingMode},e.prototype.getCurrentCodingMode=function(){return this.codingMode},e.prototype._doSwitchToProgrammingMode=function(){this.updateLayout("IDE",{fileTreeVisible:!this.task.singleFileMode,descriptionAtSidebar:this.task.singleFileMode,descriptionAtMainPanel:!this.task.singleFileMode,buildPanelAvailable:!0})},e.prototype.switchToProgrammingMode=function(){var e=this;this.task.webSolvingStrategyEnabled&&(this.inOvertimeMode||(this.codingMode&&"IDE"!==this.codingMode?this.FileService.synchronizeFiles().then(function(){e._doSwitchToProgrammingMode()}):this._doSwitchToProgrammingMode()))},e.prototype.refreshProject=function(){var e=this;this.codingMode=void 0;var t=this.dialogs.open({component:p.a.selector,backdrop:"static"});this.$timeout(function(){return e.FileService.synchronizeFiles().then(function(){t.close(),e._doSwitchToProgrammingMode()})},100)},e.prototype.switchToSfScratchMode=function(){this.updateLayout("SFSCRATCH",{fileTreeVisible:!1,descriptionAtSidebar:!0,descriptionAtMainPanel:!1,buildPanelAvailable:!0})},e.prototype.switchToExcelMode=function(){this.updateLayout("EXCEL",{fileTreeVisible:!1,descriptionAtSidebar:!0,descriptionAtMainPanel:!1,buildPanelAvailable:!0})},e.prototype.switchToDownloadMode=function(e){var t=this;return void 0===e&&(e=!1),this.task.zipSolvingStrategyEnabled?(e&&this.FileService.getModifiedFiles().length?this.FileService.checkForModifiedFiles():this.$q.resolve()).then(function(){return t.setSimpleMode("DOWNLOAD")}):this.$q.reject()},e.prototype.switchToGitMode=function(e){var t=this;return void 0===e&&(e=!1),this.task.gitSolvingStrategyEnabled?(e&&this.FileService.getModifiedFiles().length?this.FileService.checkForModifiedFiles():this.$q.resolve()).then(function(){return t.setSimpleMode("GIT")}):this.$q.reject()},e.prototype._updateFirebaseCodeEditorMode=function(){this.firebaseService.setCodeEditorMode(this.codingMode)},e.prototype.setSimpleMode=function(e){this.updateLayout(e,{fileTreeVisible:!1,descriptionAtSidebar:!0,descriptionAtMainPanel:!1,buildPanelAvailable:!0})},e.prototype.updateLayout=function(e,t){this.codingMode=e,Object.assign(this.layout,t),this._updateFirebaseCodeEditorMode(),this.examService.setCodingMode(e)},e}()},m=n("./node_modules/angular-moment/angular-moment.js"),f=n("./node_modules/jquery/dist/jquery.js"),v=n("./src/common/dvsk-ng-components/dvsk-file-button/index.ts"),g={selector:"downloadMode",template:n("./src/app/exam/steps/code-edit/download-mode/download-mode.component.html"),styles:[n("./src/app/exam/steps/code-edit/download-mode/download-mode.component.less")],bindings:{task:"<"},controller:function(){function e(e,t,n,i,o,s,r,a,l){var c=this;this.$interval=e,this.$q=t,this.$scope=n,this.dialogs=i,this.examErrorService=o,this.examService=s,this.FileService=r,this.logger=a,this.Upload=l,this.onDragEnter=function(e){var t=e.originalEvent.dataTransfer;t&&(t.dropEffect="copy",c.$scope.$applyAsync(function(){c.shouldShowDropzone=!0}))},this.onDragLeave=function(){c.shouldShowDropzone=!1}}return e.$inject=["$interval","$q","$scope","dialogs","examErrorService","examService","FileService","logger","Upload"],e.prototype.$onInit=function(){this.codePackageUrl=this.examService.getCodePackageUrl(),this.readOnlyPatterns=[],this.task.readOnlyPatterns&&this.task.readOnlyPatterns.length>0&&(this.readOnlyPatterns=this.task.readOnlyPatterns.filter(function(e){return"devskiller.json"!==e})),f(document.body).bind("dragenter",this.onDragEnter).bind("dragleave",this.onDragLeave),window.addEventListener("dragover",this.preventDefault,!1),window.addEventListener("drop",this.preventDefault,!1)},e.prototype.$onDestroy=function(){f(document.body).unbind("dragenter",this.onDragEnter).unbind("dragleave",this.onDragLeave),window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.preventDefault)},e.prototype.preventDefault=function(e){e.preventDefault()},e.prototype.startDownload=function(){},e.prototype.hasReadOnlyPatterns=function(){return this.readOnlyPatterns.length>0},e.prototype.uploadCodePackage=function(e){var t=this.examService.getCodePackageUrl();return this.logger.debug("Uploading code package to ".concat(t)),this.Upload.upload({url:t,withCredentials:!0,method:"POST",headers:{},data:{file:e}})},e.prototype.onFileSelect=function(e){var t=this;this.shouldShowDropzone=!1,this.fileUpload=null;var n=e[0],i=[this.validateFileName(n),this.validateFileSize(n),this.validateFileType(n)],o={file:n},s=this.$q;s.all(i).then(function(){t.fileUpload=o,o.isPending=!0,o.progress=0,t.FileService.setSaveInProgress(),t.upload=t.uploadCodePackage(n),t.upload.progress(function(e){t.onProgress(e,o)}).then(function(){Object.assign(o,{progress:100,isSuccess:!0,isFailure:!1,isPending:!1,isComplete:!0,completedAt:new Date}),t.FileService.finishSaveInProgress(),t.FileService.refreshFiles(),t.dialogs.notify("File uploaded","Your code has been uploaded correctly!")},function(e){return Object.assign(o,{isSuccess:!1,isFailure:!0,isPending:!1,isComplete:!0}),t.FileService.finishSaveInProgress(),t.examErrorService.defaultHttpErrorHandlerWithDialog(e,function(e){return 417===e.status?(t.logger.error("No devskiller.marker file in uploaded package"),s.reject({title:"Invalid ZIP file contents",message:"\n                  <p>Your archive doesn't contain a <strong>devskiller.marker</strong> file in its root folder.</p>\n                  <p>Please add an empty devskiller.marker file and upload your code again.</p>\n                "})):415===e.status?(t.logger.error("Wrong content type of uploaded package"),s.reject({title:"File type mismatch",message:"\n                  Your upload failed, because of wrong type of the uploaded file. Only ZIP files are supported.\n                "})):400===e.status||406===e.status||500===e.status?(t.logger.error("Invalid package uploaded, cannot process uploaded archive: ".concat(e.status)),s.reject({title:"Unprocessable ZIP file",message:"\n                  Your upload failed. Please check if your file is not too large.\n                  Remove all external dependencies included in the ZIP archive and try again.\n                "})):void 0})})},function(e){var n=e.title,i=e.message;t.dialogs.error(n||"Your solution cannot be uploaded",i)})},e.prototype.onProgress=function(e,t){var n=this;if(!t.isComplete){if(t.progress=.5*(100*e.loaded/e.total|0),t.progress>=50&&!this.serverWaitInterval){var i=100-t.progress;this.serverWaitInterval=this.$interval(function(){t.progress<100?t.progress+=1:n.serverWaitInterval&&(n.$interval.cancel(n.serverWaitInterval),n.serverWaitInterval=null)},4e3/i)}}},e.prototype.validateFileName=function(e){return String(e.name).toLowerCase().endsWith(".zip")?this.$q.resolve():this.$q.reject({title:"File type mismatch",message:"\n            <p>Your solution does not appear to be a valid ZIP archive.</p>\n            <p>Make sure you're uploading a ZIP archive. Other formats, such as RAR, 7-ZIP or GZIP are not supported.</p>\n          "})},e.prototype.validateFileSize=function(e){return e.size&&e.size>5242880?this.$q.reject({title:"Your solution file is too big",message:"\n            <p>The maximum size of the solution file you can upload is <strong>5 MB</strong>.</p>\n            <p>Please make sure that all build artifacts and external dependencies are removed before uploading.</p>\n          "}):this.$q.resolve()},e.prototype.validateFileType=function(e){var t=this;if("undefined"==typeof FileReader)return this.$q.resolve();return this.$q(function(n,i){var o=new FileReader;o.onload=function(){for(var e="",s=new Uint8Array(o.result),r=0;r<s.length;++r)e+=String.fromCharCode(s[r]);if("PK"!==e.slice(0,4)){for(var a=0,l=[{type:"7-Zip",magic:"7zÂ¼Â¯'"},{type:"RAR",magic:"Rar!"},{type:"Gzip",magic:"Â‹\b"},{type:"Bzip2",magic:"BZh"}];a<l.length;a++){var c=l[a];if(e.slice(0,c.magic.length)===c.magic)return t.logger.error("Wrong content type of uploaded package: ".concat(c.type," archive")),void i({title:"File type mismatch",message:"\n                  <p>Your solution is not a valid ZIP archive. <strong>".concat(c.type," archive detected.</strong></p>\n                  <p>Make sure you're uploading a ZIP archive. Other formats, such as RAR, 7-ZIP or GZIP are not supported.</p>\n                ")})}t.logger.error("Wrong content type of uploaded package"),i({title:"File type mismatch",message:"\n              <p>Your solution does not appear to be a valid ZIP archive.</p>\n              <p>Make sure you're uploading a ZIP archive. Other formats, such as RAR, 7-ZIP or GZIP are not supported.</p>\n            "})}else n()},o.readAsArrayBuffer(e.slice(0,10))})},e.prototype.progressBarStyle=function(){var e=this.fileUpload;return(null==e?void 0:e.progress)?{width:e.progress+"%"}:{}},e}()},b=i.module("exam.codeEdit.downloadMode",[m,v.a]).component(g.selector,g).name,y=n("./src/common/dvsk-ng-components/dvsk-src/dvsk-src.module.ts"),$=(n("./node_modules/angular-hotkeys/build/hotkeys.js"),n("./node_modules/lodash/escape.js")),S=n.n($),w={selector:"examBuildConsole",template:n("./src/app/exam/build/build-console/build-console.component.html"),styles:[n("./src/app/exam/build/build-console/build-console.component.less")],bindings:{build:"<"},controller:function(){function e(e,t,n,i){this.$element=e,this.$sce=t,this.$scope=n,this.$timeout=i}return e.$inject=["$element","$sce","$scope","$timeout"],e.prototype.$onInit=function(){var e=this;this.$scope.$watch(function(){var t;return e.build&&(null===(t=e.build.result)||void 0===t?void 0:t.consoleOutput)},function(){var t=e.build;if(t&&!t.isInProgress()){var n=e.renderConsoleOutput(t.result.consoleOutput);e.logHtml=e.$sce.trustAsHtml(n),e.scrollToConsoleEnd()}else e.logHtml=void 0})},e.prototype.renderConsoleOutput=function(e){var t="";return String(e||"").trim().split("\n").forEach(function(e){(e=S()(e)).includes("ERROR")||e.includes("FAILURE")||e.includes("FAILED")?t+='<span class="color-danger">'+e+"</span>\n":e.includes("WARNING")?t+='<span class="color-warning">'+e+"</span>\n":e.includes("SUCCESS")?t+='<span class="color-success">'+e+"</span>\n":t+=e+"\n"}),t+='<span class="console-log-end-marker"></span>'},e.prototype.scrollToConsoleEnd=function(){var e=this;this.$timeout(function(){var t=e.$element;t.find(".console-log-end-marker").each(function(){t.scrollToElementAnimated(this)})},200)},e}()},k={selector:"examBuildConsoleLoader",template:n("./src/app/exam/build/build-console-loader/build-console-loader.component.html"),styles:[n("./src/app/exam/build/build-console-loader/build-console-loader.component.less")],controller:function(){function e(e){e.addClass(e[0].tagName.toLowerCase())}return e.$inject=["$element"],e}()},C=i.module("exam.build.buildConsoleLoader",[]).component(k.selector,k).name,x=i.module("exam.build.buildConsole",[C]).component(w.selector,w).name,F=n("./node_modules/lodash/sortBy.js"),M=n.n(F),T=function(){function e(e){this.index=e,this.result={},this.startedAt=Date.now()}return e.prototype.isSuccess=function(){return this.result&&"SUCCESS"===this.result.buildStatus},e.prototype.isFailure=function(){return this.result&&["FAILURE","INTERNAL_ERROR","TIMEOUT"].includes(this.result.buildStatus)},e.prototype.isTestFailure=function(){return this.result&&"TEST_FAILURE"===this.result.buildStatus},e.prototype.isInProgress=function(){return!this.result||!this.result.buildStatus},e.prototype.getSqlTestResult=function(){var e=this.result.sqlResults;return Array.isArray(e)&&e.length>0?e.find(function(e){return"CandidateTestCase"===e.testCaseName}):null},e.prototype.isSqlQueryError=function(){var e=this.getSqlTestResult();return e&&e.errorMessage&&e.errorMessage.indexOf("Failed to execute query")>=0},e.prototype.getSqlErrorMessage=function(){var e=this.getSqlTestResult(),t="";return e&&e.errorMessage&&(t=e.errorMessage)&&(t=(t=t.replace(/Failed to execute query: [\w]*;\s/,"")).replace(/; nested exception is [\w\.]*:/," ")),t},e.prototype.getSqlQueryResult=function(){var e=this.getSqlTestResult();return e&&e.queryResult&&e.queryResult.length>0?e.queryResult:null},e.prototype.getSqlExpectedResult=function(){var e=this.getSqlTestResult();return e&&e.expectedResult&&e.expectedResult.length>0?e.expectedResult:null},e}(),E=function(){function e(e,t,n,i,o,s,r){this.$q=e,this.$rootScope=t,this.$timeout=n,this.examService=i,this.FileService=o,this.firebaseService=s,this.logger=r,this.builds=[],this.buildsCount=0,this.initListeners()}return e.$inject=["$q","$rootScope","$timeout","examService","FileService","firebaseService","logger"],e.prototype.initListeners=function(){var t=this;this.$rootScope.$on("buildCurrentProject",function(e,n){t.buildProject(null==n?void 0:n.saveAll)}),this.$rootScope.$on("notification_EXAM_BUILD_RESULT",function(n,i){t.logger.info("Received notification EXAM_BUILD_RESULT ".concat(t.debugBuildResult(i))),t.processBuildResult(i),t.firebaseService.addPageActivity({type:e.EVENT_BUILD_RECEIVED,buildResult:JSON.stringify(i)})}),this.firebaseService.registerOnValue("activities","child_added",function(n){if(n.type===e.EVENT_BUILD_RECEIVED){var i=void 0;try{i=JSON.parse(n.buildResult)}catch(o){}i&&(t.logger.info("Received build result from firebaseService ".concat(t.debugBuildResult(i))),t.processBuildResult(i))}})},e.prototype.debugBuildResult=function(e){var t,n,i;return e?"{ "+["buildStatus: ".concat(null==e?void 0:e.buildStatus),"consoleOutput: String(".concat((null===(t=null==e?void 0:e.consoleOutput)||void 0===t?void 0:t.length)||0,")"),"details: Array(".concat(null===(n=null==e?void 0:e.details)||void 0===n?void 0:n.length,")"),"sqlResults: Array(".concat(null===(i=null==e?void 0:e.sqlResults)||void 0===i?void 0:i.length,")")].join(", ")+" }":"(empty)"},e.prototype.createBuild=function(){return new T(++this.buildsCount)},e.prototype.createTestClass=function(e,t){var n={name:e,fileHash:null,methods:[],failedCount:0};return t.forEach(function(t){t.className===e&&(n.fileHash||(n.fileHash=t.fileHash),n.methods.push({name:t.testMethod||"N/A",message:t.message,failed:"FAIL"===t.type}),"FAIL"===t.type&&(n.failedCount+=1))}),n.methods=M()(n.methods,function(e){return(e.failed?"0":"1")+e.name}),n},e.prototype.getLastBuild=function(){var e=this.builds;return e.length?e[0]:null},e.prototype.processBuildResult=function(t){var n=this,i=this,o=i.$timeout,s=i.builds,r=i.logger;r.debug("Processing build result"),0===s.length&&this._createNewBuild();var a=this.getLastBuild();if(a)if(this.buildInProgress){a.monitor&&(r.info("Cancelled build monitor"),o.cancel(a.monitor));var l=null;if(a.startedAt&&(l=Date.now()-a.startedAt),r.info("Received build ".concat(a.index," result after ").concat(l," ms")),a.result=t,this.buildInProgress=null,a.result&&Array.isArray(a.result.details)){var c=a.result;c.passedTestsCount=0,c.failedTestsCount=0,c.totalTestsCount=0,c.testClasses=[],c.details.forEach(function(e){e.type&&(e.className&&!c.testClasses.find(function(t){return t.name===e.className})&&c.testClasses.push(n.createTestClass(e.className,c.details)),"FAIL"===e.type?c.failedTestsCount++:c.passedTestsCount++,c.totalTestsCount++)}),c.testClasses=M()(c.testClasses,function(e){return-1*e.failedCount})}this.$rootScope.$broadcast(e.EVENT_BUILD_RECEIVED,a)}else r.warn("There is no build in progress, skipping build result")},e.prototype.isBuildInProgress=function(){return Boolean(this.buildInProgress)},e.prototype.removeBuild=function(e){this.builds.splice(this.builds.indexOf(e),1)},e.prototype.clearBuilds=function(){this.builds.length=0,this.buildsCount=0},e.prototype.getBuilds=function(){return this.builds},e.prototype.internalErrorHandler=function(e,t){e&&(e.result={buildStatus:"INTERNAL_ERROR",consoleOutput:"FAILURE: Internal build error: "+t.status+"/"+t.statusText,details:t}),this.buildInProgress=null,this.logger.error("Setting INTERNAL_ERROR for build, FAILURE: Internal build error: "+t.status+"/"+t.statusText)},e.prototype._createNewBuild=function(){var e=this.createBuild();return this.builds.unshift(e),this.buildInProgress=e,e},e.prototype._appendToConsoleOutput=function(e){var t=this.buildInProgress;t&&t.result&&t.result.consoleOutput&&(t.result.consoleOutput+=e)},e.prototype._doBuild=function(e){var t=this,n=this,i=n.$timeout,o=n.examService,s=n.firebaseService,r=n.logger,a=this.buildInProgress,l=this.builds.length,c=o.getCurrentPageNumber();r.info("Requesting new build for ".concat(c,": ").concat(l,", quickBuild: ").concat(e)),o.buildProject(e).then(function(){s.addPageActivity({type:"buildRequested"}),i(function(){t._appendToConsoleOutput("Setting up database...")},200),i(function(){t._appendToConsoleOutput("OK\nInitializing schema...")},2e3),i(function(){t._appendToConsoleOutput("OK\nRunning query...\n")},4e3);var e=2e4;o.areWebsocketsWorking()?r.warn("No build result after 20 seconds for ".concat(c,": ").concat(l,", monitoring build...")):(r.warn("Websockets are not working, starting build monitoring immediately"),e=1e3),a&&(a.monitor=i(function(){o.monitorLastBuildForPage(c).then(function(e){e.data&&200===e.status&&t.processBuildResult(e.data)})},e))},function(e){t.internalErrorHandler(t.buildInProgress,e)})},e.prototype.quickBuildProject=function(){this.buildProject(!1,!0)},e.prototype.buildProject=function(e,t){var n=this;if(!this.examService.isSpectator()){var i=this.FileService;if(!this.buildInProgress){var o=this._createNewBuild(),s=i.getModifiedFiles(),r=this.$q;return s.length?e?(o.result.consoleOutput="Saving modified files...",r.all(s.map(function(e){return i.saveFile(e.hash)})).then(function(){return o.result.consoleOutput+="OK\n",n._doBuild(t)})):i.checkForModifiedFiles().then(function(){return n._doBuild()},function(){n.buildInProgress=null,n.builds.splice(0,1)}):(o.result.consoleOutput="",this._doBuild(t))}}},e.prototype.fetchLastBuild=function(){var e=this;this.examService.lastBuild().then(function(t){200===t.status&&e.processBuildResult(t.data)})},e.prototype.connectToFirepad=function(){var e=this,t=this,n=t.$timeout,i=t.examService,o=t.firebaseService,s=!1;i.isSpectator()&&(o.registerOnValue("activities","child_added",function(t){if(!s)return!1;if("buildRequested"===t.type){var o=e._createNewBuild();o.monitor=n(function(){o&&i.monitorLastBuild().then(function(t){t.data&&200===t.status&&e.processBuildResult(t.data)})},2e4)}}),o.registerOnceValue("activities","value",function(){s=!0}))},e.prototype.unselectBuild=function(){throw new Error("BuildService#unselectBuild() is not implemented")},e.prototype.getSelectedBuild=function(){throw new Error("BuildService#getSelectedBuild() is not implemented")},e.EVENT_BUILD_RECEIVED="buildService.buildReceived",e}(),P=i.module("exam.build.buildService",[]).service("buildService",E).name,I={selector:"buildDetails",template:n("./src/app/exam/build/build-details.component.html"),styles:[n("./src/app/exam/build/build-details.component.less")],controller:function(){function e(e,t,n){this.$scope=e,this.buildService=t,this.FileService=n,this.activeTestClassName="",this.activeTestMethod=null,this.refreshBuild=this.refreshBuild.bind(this)}return e.$inject=["$scope","buildService","FileService"],e.prototype.$onInit=function(){this.refreshBuild(),this.$scope.$on(E.EVENT_BUILD_RECEIVED,this.refreshBuild)},e.prototype.refreshBuild=function(){this.build=this.buildService.getLastBuild(),this.activeTestClassName="",this.activeTestMethod=null,this.setupDefaultTestSelection()},e.prototype.setupDefaultTestSelection=function(){if(this.build&&this.build.result&&this.build.result.testClasses&&this.build.result.testClasses.length>0){var e=this.build.result.testClasses[0];this.activeTestClassName=e.name;var t=e.methods.find(function(e){return e.failed});t&&(this.activeTestMethod=t)}},e.prototype.isTestClassActive=function(e){return e.name===this.activeTestClassName},e.prototype.isTestMethodActive=function(e,t){return this.isTestClassActive(e)&&this.activeTestMethod===t},e.prototype.toggleTestClass=function(e){this.activeTestClassName===e.name?this.activeTestClassName="":this.activeTestClassName=e.name},e.prototype.activateTestMethod=function(e,t,n){n.preventDefault(),n.stopPropagation(),this.activeTestMethod=t},e.prototype.getFileName=function(e){return e?this.FileService.getFileName(e):""},e.prototype.goTo=function(e){e.fileHash&&this.FileService.openFile(e.fileHash,e.line)},e.prototype.isBuildVisible=function(){return Boolean(this.buildService.getLastBuild())},e}()},A={selector:"buildPanel",template:n("./src/app/exam/build/build-panel.component.html"),styles:[n("./src/app/exam/build/build-panel.component.less")],bindings:{task:"<",tabs:"<",lastBuild:"<"},controller:function(){function e(e,t,n,i,o,s,r){this.$rootScope=e,this.$scope=t,this.buildService=n,this.dialogs=i,this.hotkeys=o,this.logger=s,this.runtimeInfoService=r}return e.$inject=["$rootScope","$scope","buildService","dialogs","hotkeys","logger","runtimeInfoService"],e.prototype.$onInit=function(){var e=this,t=this,n=t.$rootScope,i=t.$scope,o=t.buildService,s=t.dialogs,r=t.logger,a=t.hotkeys;r.debug("Initializing buildPanel controller, fetching last build"),l.z[this.task.projectType]!==l.z.PLAIN&&this.buildService.fetchLastBuild(),a.add({combo:"f9",description:"Build project",callback:function(){n.$broadcast("buildCurrentProject")}}),i.$on("buildCurrentProject",function(){e.task.compilable?e.tabs.show("build-console"):s.notify("Cannot build project","Current project type is not eligible for build.")}),o.getBuilds()},e.prototype.$onChanges=function(e){e.lastBuild&&this.onLastBuildChange()},e.prototype.$onDestroy=function(){this.hotkeys.del("f9")},e.prototype.onLastBuildChange=function(){var e=this.lastBuild,t="build-console";this.task.singleFileMode&&this.lastBuild&&(this.lastBuild.isInProgress()?t="build-console":this.lastBuild.isFailure()||(t="test-results")),this.tabs.show(t),e&&!e.isInProgress()&&this.task.singleFileMode&&!e.isFailure()&&this.tabs.show("test-results")},e.prototype.isQuickBuildSupported=function(){return this.runtimeInfoService.isQuickBuildSupported(this.task.projectType,this.task.projectTypeVersion)},e.prototype.quickBuildProject=function(){this.tabs.show("build-console"),this.buildService.quickBuildProject()},e.prototype.buildProject=function(){this.tabs.show("build-console"),this.buildService.buildProject()},e}()},j=n("./src/app/exam/build/build-project-button.directive.html"),B=function(){function e(e,t,n){this.buildService=e,this.runtimeInfoService=t,this.tooltip="Build project (F9)"}return e.$inject=["buildService","runtimeInfoService","$element"],e.prototype.buildProject=function(){return this.tab&&this.tabs&&this.tabs.show(this.tab),this.quickBuild?this.buildService.quickBuildProject():this.buildService.buildProject()},e.prototype.isBuildInProgress=function(){return this.buildService.isBuildInProgress()},e.prototype.isQuickBuildSupported=function(){return this.runtimeInfoService.isQuickBuildSupported(this.task.projectType,this.task.projectTypeVersion)},e.prototype.isTooltipEnabled=function(){return!0},e}(),O=function(){function e(e){this.$compile=e,this.restrict="A",this.priority=599,this.terminal=!0,this.template=j,this.bindToController={task:"<",quickBuild:"<",tabs:"<",tab:"@"},this.controllerAs="$ctrl",this.controller=B,this.scope={}}return e.$inject=["$compile"],e.prototype.compile=function(t,n){var i=this,o=["ngIf","ngRepeat","ngSwitch",e.selector];return t.each(function(e,t){for(var i=0,s=Array.from(t.attributes);i<s.length;i++){var r=s[i];o.includes(n.$normalize(r.name))&&t.removeAttribute(r.name)}}),t.attr("ng-click","$ctrl.buildProject($event)"),t.attr("ng-show","$ctrl.task.compilable"),t.attr("ng-disabled","$ctrl.isBuildInProgress()"),t.attr("uib-tooltip","{{ $ctrl.tooltip }}"),t.attr("tooltip-enable","$ctrl.isTooltipEnabled()"),t.attr("tooltip-append-to-body","true"),t.is("button")?t.attr("type","button"):t.attr("role","button"),t.addClass("build-project-button"),function(e,t){i.$compile(t)(e)}},e.selector="buildProjectButton",e}(),_=n("./src/common/directive-factory.ts"),R={selector:"examSqlBuildPanel",template:n("./src/app/exam/build/sql-build-panel/sql-build-panel.component.html"),bindings:{task:"<",lastBuild:"<"},controller:function(){function e(e,t){this.$rootScope=e,this.logger=t}return e.$inject=["$rootScope","logger"],e.prototype.buildProject=function(){this.logger.debug("[sqlBuildPanel] Triggering build for SQL Project..."),this.$rootScope.$broadcast("buildCurrentProject",{saveAll:!0})},e}()},L=i.module("exam.build.sqlBuildPanel",[C,P]).component(R.selector,R).name,D=i.module("exam.build",["cfp.hotkeys",x,P,L]).directive(O.selector,Object(_.a)(O)).component(A.selector,A).component(I.selector,I).name,q=n("./src/app/exam/editor/exam-code-editor.ts"),H={selector:"autocompleteOff",restrict:"A",controller:function(){function e(e){var t=this;this.$element=e,this.id=Math.random().toString(36).substr(2),this.onFocus=function(){var e=t.$element;t.name=e.attr("name"),e.attr("name",t.id)},this.onBlur=function(){t.$element.attr("name",t.name)}}return e.$inject=["$element"],e.prototype.$onInit=function(){this.$element.attr("autocomplete",this.id),this.$element.on("focus",this.onFocus).on("blur",this.onBlur)},e.prototype.$onDestroy=function(){this.$element.off("focus",this.onFocus).off("blur",this.onBlur)},e}()},N=i.module("dvsk.autocompleteOff",[]).directive(H.selector,Object(_.a)(H)).name,z={selector:"confirmCloseModifiedFile",template:n("./src/app/exam/editor/confirm-close-modified-file.component.html"),bindings:{hash:"<",file:"<",close:"&",dismiss:"&"},controller:function(){function e(e){this.FileService=e}return e.$inject=["FileService"],e.prototype.saveFile=function(){var e=this.FileService,t=this.hash;return e.saveFile(t).then(function(){e.closeFile(t)})},e.prototype.revertFile=function(){return this.FileService.revertFile(this.hash)},e}()},W=n("./node_modules/lodash/difference.js"),U=n.n(W),V=n("./node_modules/lodash/find.js"),G=n.n(V),Q=n("./node_modules/lodash/forEach.js"),Y=n.n(Q),Z=n("./node_modules/lodash/includes.js"),K=n.n(Z),J=n("./node_modules/lodash/isEmpty.js"),X=n.n(J),ee=n("./node_modules/lodash/isUndefined.js"),te=n.n(ee),ne=n("./node_modules/lodash/keys.js"),ie=n.n(ne),oe=n("./node_modules/lodash/last.js"),se=n.n(oe),re=n("./node_modules/lodash/map.js"),ae=n.n(re),le=n("./node_modules/lodash/now.js"),ce=n.n(le),de=n("./node_modules/lodash/remove.js"),ue=n.n(de),pe=n("./node_modules/lodash/values.js"),he=n.n(pe),me={selector:"modifiedFilesModal",template:n("./src/app/exam/files/modified-files-modal.component.html"),bindings:{modifiedFiles:"<",close:"&",dismiss:"&"},controller:function(){function e(e,t){this.$q=e,this.FileService=t}return e.$inject=["$q","FileService"],e.prototype.$onInit=function(){},e.prototype.saveFiles=function(){var e=this;return this.$q.all(this.modifiedFiles.map(function(t){return e.FileService.saveFile(t.hash)}))},e.prototype.revertFiles=function(){var e=this;return this.$q.all(this.modifiedFiles.map(function(t){return e.FileService.revertFile(t.hash)}))},e}()},fe=function(){function e(e,t,n,i,o,s,r){var a=this;this.$q=e,this.$rootScope=t,this.base64=n,this.dialogs=i,this.examService=o,this.firebaseService=s,this.logger=r,this.files=Object.create(null),this.openedFiles=[],this.saveInProgress=!1,this.activeContext={file:null,line:null,clear:function(){this.file=null,this.line=null}},t.$on("currentPageChange",function(){a.lastSyncedAt=a.firebaseService.timeStamp()})}return e.$inject=["$q","$rootScope","base64","dialogs","examService","firebaseService","logger"],e.prototype.createFileHandle=function(e,t,n,i,o){return{hash:e,name:t,type:n,parentHash:i||void 0,childrenHashes:[],attributes:o||{},content:void 0,contentType:void 0,lastModification:void 0,lastSave:void 0,loadInProgress:!1,setContent:function(e,t){this.content!==e&&(te()(this.content)||(this.lastModification=ce()()),this.content=e,e&&t?this.contentType=t:te()(e)&&(this.contentType=void 0))},isModified:function(){return Boolean(this.lastModification)&&(!this.lastSave||this.lastSave<this.lastModification)}}},e.prototype.setSaveInProgress=function(){this.saveInProgress=!0},e.prototype.finishSaveInProgress=function(){this.saveInProgress=!1},e.prototype.isSaveInProgress=function(){return this.saveInProgress},e.prototype.setFiles=function(e){var t=this;e&&this.logger.debug("Setting "+e.length+" task files");var n=function(e,i){Y()(e,function(e){t.files[e.hash]=t.createFileHandle(e.hash,e.name,e.type,i,e.fileAttributes),X()(e.files)||(t.files[e.hash].childrenHashes=ae()(e.files,"hash"),n(e.files,e.hash))})};this.files=Object.create(null),this.openedFiles.length=0,this.activeContext.clear(),n(e);var i=G()(e,function(e){return".editorconfig"===e.name});this.editorConfigHash=i?i.hash:null,this.$rootScope.$broadcast("filesReset",this.files)},e.prototype._openFile=function(e,t){var n=this.activeContext,i=this.files[e];return i&&"directory"!==i.type.toLowerCase()&&(K()(this.openedFiles,i)||(this.openedFiles.push(i),this.getFileContent(i.hash)),n.file=i,n.line=t||0),n},e.prototype.openFile=function(e,t){var n=this._openFile(e,t);this.firebaseService.setCodeEditorContext(this.openedFiles,n)},e.prototype.openMultipleFiles=function(e,t){var n=this;t||(t=se()(e)),Y()(e,function(e){var i=n.files[e];i&&"directory"!==i.type.toLowerCase()&&(K()(n.openedFiles,i)||(n.openedFiles.push(i),n.getFileContent(i.hash),t===e&&(n.activeContext.file=i,n.activeContext.line=void 0)))})},e.prototype.getFileContent=function(e){var t=this.files[e];if(!t)return this.$q.reject();if("string"==typeof t.content)return this.$q.resolve(t.content);if(!t.contentPromise){var n=this.base64,i=this.examService;t.loadInProgress=!0,t.contentPromise=i.getFile(e).then(function(e){var i=e.data;return t.setContent(n.decode(i.encodedContents),i.mimeType),t.content||""},function(e){throw e}).finally(function(){t.loadInProgress=!1})}return t.contentPromise},e.prototype._createFile=function(e,t,n,i){if(this.files[e]=this.createFileHandle(e,t,n?"DIRECTORY":"FILE",i),i&&this.files[i]){var o=this.files[i];o.childrenHashes=o.childrenHashes||[],o.childrenHashes.push(e)}return this.$rootScope.$broadcast("filesChanged",this.files),this.files[e]},e.prototype._createFilePath=function(e,t){return(e+"/"+t).replace(/\/+/g,"/").replace(/^\/+/,"")},e.prototype.optimisticCreateFile=function(e,t,n,i){var o=this,s=this._createFilePath(e,t),r=btoa(s);if(this.files[r])return this.dialogs.error("Create file failed","Another file with this name already exists at the requested path"),this.$q.reject();var a=this._createFile(r,t,i,n),l=a.type;return a.setContent(""),this.firebaseService.updateChildValue("newFile",{hash:r,name:t,type:l,parentHash:n}),this.openFile(r),this.examService.createFile(s,i).then(function(e){if(e&&e===r)return a;if(o._deleteFile(r),o.firebaseService.updateChildValue("deleteFile",{hash:r}),e){var c=o._createFile(e,t,i,n);return c.setContent(a.content),o.firebaseService.updateChildValue("newFile",{hash:e,name:t,type:l,parentHash:n}),o.openFile(c.hash),o.logger.error("FileService: File hash mismatch: path=".concat(s,", expected=").concat(r,", received=").concat(e)),c}return null})},e.prototype.createFile=function(e,t,n,i){var o=this,s=this.examService,r=this._createFilePath(e,t);return s.createFile(r,i).then(function(e){if(!e)return null;var s=o._createFile(e,t,i,n);return o.firebaseService.updateChildValue("newFile",{hash:e,name:name,type:s.type,parentHash:n}),o.openFile(s.hash),s})},e.prototype.saveFile=function(e){var t=this,n=this.$q,i=this.examService,o=this.files[e];return o&&"directory"!==o.type.toLowerCase()?(this.setSaveInProgress(),i.saveFile(e,o.content).then(function(){o.lastSave=+new Date,t.firebaseService.updateChildValue("saveFile",{hash:e,lastSave:o.lastSave,lastModification:o.lastModification})}).finally(function(){t.finishSaveInProgress()})):n.reject("File not found")},e.prototype.refreshFiles=function(){var e=this;this.examService.getCurrentPage().then(function(t){var n,i=(null===(n=t.tasks[0])||void 0===n?void 0:n.files)||[];e.setFiles(i)})},e.prototype.synchronizeFiles=function(){var e=this,t=this.examService,n=this.firebaseService;return t.synchronizeCurrentRepo().then(function(t){var i,o=(null===(i=t.tasks[0])||void 0===i?void 0:i.files)||[];if(n.isEnabled())return n.clearFilesContent(e.getFileHashes()).then(function(){e.setFiles(o)});e.setFiles(o)})},e.prototype.deleteFile=function(e){var t=this;return this.examService.deleteFile(e).then(function(){var n=t._deleteFile(e),i=t.firebaseService;i.setCodeEditorContext(t.openedFiles,t.activeContext),n.forEach(function(e){i.updateChildValue("deleteFile",{hash:e})})})},e.prototype._deleteFile=function(e){return this._deleteFileTree(e,[])},e.prototype._deleteFileTree=function(e,t){var n=this,i=this.files[e];if(!i)return t;if(Array.isArray(i.childrenHashes)&&i.childrenHashes.slice().forEach(function(e){n._deleteFileTree(e,t)}),i.parentHash){var o=this.files[i.parentHash];o&&Array.isArray(o.childrenHashes)&&ue()(o.childrenHashes,function(t){return e===t})}return this._closeFile(e),delete this.files[e],t.push(e),this.$rootScope.$broadcast("filesChanged",this.files),t},e.prototype.revertFile=function(e){var t=this,n=t.examService,i=t.base64,o=t.$rootScope,s=this.files[e];return s&&"directory"!==s.type.toLowerCase()?n.getFile(e).then(function(e){var t=e.data;s.setContent(i.decode(t.encodedContents),t.mimeType),s.lastModification=void 0,s.lastSave=void 0,o.$broadcast("revertedFileContent",s)}):this.$q.reject("File ".concat(s," not found"))},e.prototype._closeFile=function(e){var t=this.files[e];if(t){var n,i=this.openedFiles.indexOf(t);-1!==i&&(n=0===i?this.openedFiles[1]:this.openedFiles[i-1],this.openedFiles.splice(i,1)),this.activeContext.file===t&&(n?(this.activeContext.file=n,this.activeContext.line=null):this.activeContext.clear())}},e.prototype.closeFile=function(e){var t=this.firebaseService;this._closeFile(e),t.isEnabled()&&t.setCodeEditorContext(this.openedFiles,this.activeContext)},e.prototype.connectPageWithFirebase=function(){var e=this,t=this.firebaseService;t.isEnabled()&&(t.listenToChildValueChanges("codeEditorContext",function(t){var n=e.getOpenedFiles().map(function(e){return e.hash});t&&(U()(n,t.openedFiles).forEach(function(t){e._closeFile(t)}),e.getActiveFileHash()!==t.activeContextFile&&e._openFile(t.activeContextFile))}),t.initCodeEditorContext(function(t){t&&e.openMultipleFiles(t.openedFiles,t.activeContextFile)}),t.listenToChildValueChanges("newFile",function(t){t.timeStamp>e.lastSyncedAt&&!e.files[t.hash]&&(e.files[t.hash]=e.createFileHandle(t.hash,t.name,t.type,t.parentHash),e.$rootScope.$broadcast("filesChanged",e.files))}),t.listenToChildValueChanges("deleteFile",function(t){t.timeStamp>e.lastSyncedAt&&e._deleteFile(t.hash)}),t.listenToChildValueChanges("saveFile",function(t){var n=e.files[t.hash];n&&(n.lastSave=t.lastSave,n.lastModification=t.lastModification)}))},e.prototype.isActive=function(e){var t;return(null===(t=this.activeContext.file)||void 0===t?void 0:t.hash)===e},e.prototype.setActive=function(e){if(e){if(!this.files[e])throw Error("File ".concat(e," is not found"));this.activeContext.file=this.files[e],this.activeContext.line=null,this.firebaseService.isEnabled()&&this.firebaseService.setCodeEditorContext(this.openedFiles,this.activeContext)}else this.activeContext.clear()},e.prototype.getActiveContext=function(){return this.activeContext},e.prototype.getActiveFile=function(){return this.activeContext.file},e.prototype.getActiveFileHash=function(){var e=this.getActiveContext();return e.file?e.file.hash:null},e.prototype.revertActiveFile=function(){var e=this.getActiveFile();if(e)return this.revertFile(e.hash);this.$q.reject("There is no active file!")},e.prototype.saveActiveFile=function(){var e=this.getActiveFile();return e?this.saveFile(e.hash):this.$q.reject("There is no active file!")},e.prototype.isActiveFileModified=function(){var e;return null===(e=this.getActiveFile())||void 0===e?void 0:e.isModified()},e.prototype.setFileContent=function(e,t){this.files[e].setContent(t)},e.prototype.isModified=function(e){return this.files[e]&&this.files[e].isModified()},e.prototype.getFileName=function(e){return this.getFile(e).name},e.prototype.getFile=function(e){if(this.files[e])return this.files[e];throw Error("File not found: ".concat(e))},e.prototype.getFiles=function(){return he()(this.files)},e.prototype.getFileHashes=function(){return ie()(this.files)},e.prototype.getOpenedFiles=function(){return this.openedFiles},e.prototype.getModifiedFiles=function(){return Object.values(this.files).filter(function(e){return e.isModified()})},e.prototype.isOpened=function(e){return!te()(this.files[e])},e.prototype.fileExists=function(e){return!te()(this.files[e])},e.prototype.getParentHash=function(e){if(this.files[e])return this.files[e].parentHash;throw Error("File not found")},e.prototype.getEditorConfig=function(){return this.getFileContent(this.editorConfigHash)},e.prototype.checkForModifiedFiles=function(){var e=this.$q,t=this.dialogs,n=this.getModifiedFiles();return n.length?t.open({component:me.selector,size:"lg",keyboard:!0,backdrop:"static",windowClass:"colored-header",resolve:{modifiedFiles:function(){return n}}}).result:e.resolve()},e}(),ve=n("./src/app/exam/files/exam-file-tree.ts"),ge=i.module("exam.files",[ve.a,N]).service("examFileService",fe).factory("fileService",["$injector",function(e){return e.get("examFileService")}]).factory("FileService",["$injector",function(e){return e.get("examFileService")}]).component(me.selector,me).component(z.selector,z).name,be={selector:"excelMode",template:n("./src/app/exam/steps/code-edit/excel-mode/excel-mode.component.html"),bindings:{task:"<"},controller:function(){function e(){}return e.prototype.$onInit=function(){},e}()},ye={selector:"gitMode",template:n("./src/app/exam/steps/code-edit/git-mode.component.html"),bindings:{task:"<"},controller:function(){function e(){}return e.prototype.$onInit=function(){this.clone={command:this.task.repositoryUrl+""},this.readOnlyPatterns=[],this.task.readOnlyPatterns&&this.task.readOnlyPatterns.length>0&&(this.readOnlyPatterns=this.task.readOnlyPatterns.filter(function(e){return"devskiller.json"!==e}))},e.prototype.hasReadOnlyPatterns=function(){return this.readOnlyPatterns.length>0},e.prototype.joinedReadOnlyPatterns=function(){return this.readOnlyPatterns.join("\n")},e}()},$e=function(){function e(e,t,n,i){this.panelsContainer=e,this.tabs=n,this.$timeout=i,this.panelsContainer=e,this.sidebarCollapsed=!1,this.buildPanelCollapsed=!1,this.setLayout(t)}return e.prototype.calculateSidebarWidth=function(){var e=this.panelsContainer.width(),t=350;return this.layout.descriptionAtSidebar&&(t=400,e&&e<t&&(t=Math.ceil(.4*e))),t},e.prototype.setLayout=function(e){this.layout=e,this.sidebarWidth=this.calculateSidebarWidth(),this.sidebarCollapseInfo={left:0,width:this.sidebarWidth},this.buildPanelCollapseInfo={bottom:0,mainContentHeight:0,buildPanelTop:0,buildPanelHeight:0},this.updateLayoutForCodingMode()},e.prototype.dispose=function(){},e.prototype.buildPanelDiv=function(){return this.panelsContainer.children(".build-panel-wrapper")},e.prototype.mainContentDiv=function(){return this.panelsContainer.children(".main-content")},e.prototype.leftSidebar=function(){return this.panelsContainer.children(".left-sidebar")},e.prototype.isMainPanelExpanded=function(){return this.buildPanelCollapsed&&this.sidebarCollapsed},e.prototype.expandMainPanel=function(){this.buildPanelCollapsed||this.collapseBuildPanel(),this.sidebarCollapsed||this.collapseSidebar()},e.prototype.compressMainPanel=function(){this.buildPanelCollapsed&&this.showBuildPanel(),this.sidebarCollapsed&&this.showSidebar()},e.prototype.collapseBuildPanel=function(){this.buildPanelCollapsed=!0;var e=this.buildPanelDiv(),t=this.mainContentDiv();this.buildPanelCollapseInfo.buildPanelHeight=e.css("height"),this.buildPanelCollapseInfo.buildPanelTop=e.css("top"),this.buildPanelCollapseInfo.bottom=t.css("bottom"),this.buildPanelCollapseInfo.mainContentHeight=t.css("height"),e.css({height:"30px",top:"auto",bottom:0}),t.css({bottom:"30px",height:"auto"}),e.addClass("collapsed"),t.addClass("build-panel-collapsed")},e.prototype.showBuildPanel=function(e){this.buildPanelCollapsed=!1;var t=this.buildPanelDiv(),n=this.mainContentDiv(),i=this.buildPanelCollapseInfo;t.css({height:i.buildPanelHeight,top:"auto",bottom:0}),n.css({bottom:i.bottom,height:i.mainContentHeight}),t.removeClass("collapsed"),n.removeClass("build-panel-collapsed"),e&&this.tabs.show(e)},e.prototype.toggleBuildPanel=function(e){this.buildPanelCollapsed?this.showBuildPanel(e):this.collapseBuildPanel()},e.prototype.collapseSidebar=function(){var e=this;this.sidebarCollapsed=!0,this.sidebarCollapseInfo.left=parseInt(this.mainContentDiv().css("left"),10),this.sidebarCollapseInfo.width=parseInt(this.leftSidebar().css("width"),10),this.leftSidebar().css({width:"30px"}),this.mainContentDiv().css({left:"40px"}),this.buildPanelDiv().css({left:"40px"}),this.$timeout(function(){e.leftSidebar().addClass("collapsed")},100)},e.prototype.showSidebar=function(){var e=this.sidebarCollapseInfo;this.sidebarCollapsed=!1,this.leftSidebar().removeClass("collapsed"),this.updateSidebarWidth(e.width)},e.prototype.toggleSidebar=function(){this.sidebarCollapsed?this.showSidebar():this.collapseSidebar()},e.prototype.updateLayoutForCodingMode=function(){this.panelsContainer.width()<992?(this.leftSidebar().addClass("collapsed"),this.collapseSidebar()):this.showSidebar()},e.prototype.updateLayoutWhileResizing=function(e){var t=this.mainContentDiv();if("left-sidebar"===e.id&&this.updateSidebarWidth(e.width),"right-sidebar"===e.id){var n={right:e.width};t.css(n),this.buildPanelDiv().css(n)}"main-panel"===e.id&&this.buildPanelDiv().css({top:e.height,height:t.parent().height()-e.height})},e.prototype.updateSidebarWidth=function(e){this.sidebarCollapseInfo.width=e,this.mainContentDiv().css({left:e}),this.buildPanelDiv().css({left:e}),this.leftSidebar().css({width:e})},e}(),Se={selector:"programmingTaskEditor",template:n("./src/app/exam/steps/code-edit/programming-task-editor.component.html"),styles:[n("./src/app/exam/steps/code-edit/programming-task-editor.component.less")],bindings:{task:"<",layout:"<",codingMode:"<",inOvertimeMode:"<",switchToGitMode:"&",switchToDownloadMode:"&",switchToProgrammingMode:"&",refreshProject:"&"},controller:function(){function e(e,t,n,i,o,s,r,a){this.$element=e,this.$rootScope=t,this.$scope=n,this.$timeout=i,this.buildService=o,this.examService=s,this.FileService=r,this.runtimeInfoService=a,this.tabs={activeTab:"build-console",is:function(e){return this.activeTab===e},show:function(e){this.activeTab=e}},e.addClass(e[0].tagName.toLowerCase()),e.addClass("no-transition")}return e.$inject=["$element","$rootScope","$scope","$timeout","buildService","examService","FileService","runtimeInfoService"],e.prototype.$onInit=function(){var e=this,t=this,n=t.$scope,i=t.$rootScope,o=t.buildService;n.$watch(function(){return o.getBuilds().length},function(){e.lastBuild=o.getLastBuild()}),n.$on("angular-resizable.resizing",function(t,n){e.layoutManager&&e.layoutManager.updateLayoutWhileResizing(n)}),n.$on("angular-resizable.resizeEnd",function(){i.$broadcast("refreshEditor")}),this.buildService.clearBuilds(),this.buildService.connectToFirepad(),this.activeSidebarTab="fileTree",this.FileService.connectPageWithFirebase(),this.layoutManager=new $e(this.panelsContainer(),this.layout,this.tabs,this.$timeout),this.$timeout(function(){return e.$element.removeClass("no-transition")})},e.prototype.$onChanges=function(e){if(e&&e.codingMode&&this.layoutManager&&(this.layoutManager.setLayout(this.layout),this.$rootScope.$broadcast("refreshEditor")),null==e?void 0:e.codingMode){var t=this.$element;t.removeClass("coding-mode--".concat(e.codingMode.previousValue)),t.addClass("coding-mode--".concat(e.codingMode.currentValue))}(null==e?void 0:e.task)&&(this.FileService.setFiles(this.task.files),this.task.singleFileMode&&this.task.files.length>0&&this.FileService.openFile(this.task.files[0].hash),"DEVOPS"!==this.task.type&&"TESTING"!==this.task.type&&this.$rootScope.$broadcast("tourIsAvailable",!0))},e.prototype.$onDestroy=function(){this.layoutManager.dispose()},e.prototype.isSpectator=function(){return this.examService.isSpectator()},e.prototype.isQuickBuildSupported=function(){return this.runtimeInfoService.isQuickBuildSupported(this.task.projectType,this.task.projectTypeVersion)},e.prototype.panelsContainer=function(){return this.$element.children(".panels-container")},e.prototype.buildPanelDiv=function(){return this.panelsContainer().children(".build-panel-wrapper")},e.prototype.mainContentDiv=function(){return this.panelsContainer().children(".main-content")},e.prototype.leftSidebar=function(){return this.panelsContainer().children(".left-sidebar")},e}()},we={content:n("./src/app/exam/steps/code-edit/programming-task-mode-selector/assets/programming-task.svg"),gitMode:n("./src/app/exam/steps/code-edit/programming-task-mode-selector/assets/git-mode.svg"),editorMode:n("./src/app/exam/steps/code-edit/programming-task-mode-selector/assets/editor-mode.svg"),downloadMode:n("./src/app/exam/steps/code-edit/programming-task-mode-selector/assets/download-mode.svg")},ke={selector:"programmingTaskModeSelector",template:n("./src/app/exam/steps/code-edit/programming-task-mode-selector/programming-task-mode-selector.component.html"),styles:[n("./src/app/exam/pages/exam-page.less"),n("./src/app/exam/steps/code-edit/programming-task-mode-selector/programming-task-mode-selector.component.less")],bindings:{exam:"<",task:"<",inOvertimeMode:"<",switchToGitMode:"&",switchToDownloadMode:"&",switchToProgrammingMode:"&"},controller:function(){function e(e,t){this.examService=t,this.images=we,e.addClass(e[0].tagName.toLowerCase())}return e.$inject=["$element","examService"],e.prototype.$onInit=function(){this.optionDisabledCopy="This option has been disabled by ".concat(this.exam.companyName||"your recruiter",".")},e.prototype.$onDestroy=function(){},e.prototype.isSpectator=function(){return this.examService.isSpectator()},e}()},Ce=function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,a)}l((i=i.apply(e,t||[])).next())})},xe=function(e,t){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},Fe={selector:"sfscratchMode",template:n("./src/app/exam/steps/code-edit/sfscratch-mode.component.html"),bindings:{task:"<",connectUrl:"<",linkRefreshed:"<",errorMessage:"<"},controller:function(){function e(e,t,n){this.$state=e,this.api=t,this.logger=n,this.linkRefreshed=!1}return e.$inject=["$state","api","logger"],e.prototype.$onInit=function(){return Ce(this,void 0,void 0,function(){var e;return xe(this,function(t){return e=this.task.vmResource.loginUrl,this.connectUrl=e,[2]})})},e.prototype.onRefreshUrl=function(){var e=this,t=this.api,n=this.$state;return this.linkRefreshed=!1,this.errorMessage="",this.logger.debug("[Salesforce] Refresh credentials."),t.post("assignment/"+n.params.id+"/refreshCredentials").then(function(t){e.connectUrl=t.headers("location"),e.linkRefreshed=!0}).catch(function(t){e.errorMessage="Could not refresh the link. Try again or contact support.",e.logger.error("[Salesforce] Could not refresh credentials. Error: ".concat(t.message))})},e.prototype.openSalesforce=function(){window.open(this.connectUrl,"_blank")},e}()},Me=n("./src/common/code-editor/tabbed-editor-container/index.ts"),Te=i.module("exam.steps.codeEdit",["angular-clipboard","angular-intro","ngFileUpload",q.a,D,ge,b,y.a,Me.a]).component(c.selector,c).component(d.selector,d).component(h.selector,h).component(be.selector,be).component(ye.selector,ye).component(Se.selector,Se).component(ke.selector,ke).component(Fe.selector,Fe).directive("copyCommandButton",["$timeout",function(e){return{restrict:"E",scope:{command:"="},template:'<button class="btn btn-info" clipboard text="command"><i class="fa fa-copy" aria-hidden="true"></i> <span>Copy</span></button>',link:function(t,n){n.on("click",function(){n.find("span").text("Copied!"),e(function(){n.find("span").text("Copy")},2e3)})}}}]).name,Ee=(n("./src/common/code-review/codemirror-review-addon.ts"),{selector:"commentsPanel",template:n("./src/app/exam/comments/comments-panel.component.html"),bindings:{comments:"<"},controller:function(){function e(e,t,n){this.commentService=e,this.examService=t,this.FileService=n}return e.$inject=["commentService","examService","FileService"],e.prototype.isSpectator=function(){return this.examService.isSpectator()},e.prototype.getFileName=function(e){return this.FileService.getFileName(e)},e.prototype.goTo=function(e){this.FileService.openFile(e.fileHash,e.startLine+1),this.commentService.openEditMode(e)},e}()}),Pe=(i.module("exam.comments",[]).component(Ee.selector,Ee).name,n("./node_modules/lodash/countBy.js")),Ie=n.n(Pe),Ae={selector:"codeReviewStep",template:n("./src/app/exam/steps/code-review/code-review-step.component.html"),bindings:{task:"<",pageNumber:"<"},controller:function(){function e(e,t,n,i,o,s,r,a,l){this.$cookies=t,this.$rootScope=n,this.$scope=i,this.$timeout=o,this.examService=s,this.FileService=r,this.localStorageService=a,this.ngIntroService=l,this.firebaseInitialized=!1,this.firebaseService=e.has("firebaseService")?e.get("firebaseService"):void 0}return e.$inject=["$injector","$cookies","$rootScope","$scope","$timeout","examService","FileService","localStorageService","ngIntroService"],e.prototype.$onInit=function(){var e=this,t=this,n=t.$rootScope,o=t.$scope,s=t.FileService,r=t.firebaseService,a=t.localStorageService;s.setFiles(this.task.files),s.connectPageWithFirebase();var l=a.get(this.commentsStorageKey())||this.task.comments;this.task.comments=Array.isArray(l)?l:[],o.$on("fileTree.synchronized",function(){e.decorateFileTree(e.task.comments)}),o.$watch(function(){return e.task.comments},function(t){if(a.set(e.commentsStorageKey(),t),e.decorateFileTree(t),e.firebaseInitialized&&!e.examService.isSpectator()){var n=i.fromJson(i.toJson(t));n.length||(n={length:0}),null==r||r.setChildValue("comments",{comments:n})}},!0),this.initFirebaseSync(),n.$broadcast("tourIsAvailable",!0)},e.prototype.$postLink=function(){var e=this.$cookies,t="DVSK_CodeReviewIntro";if(!this.examService.isSpectator()&&"1"!==e.get(t)){var n=this.$timeout,i=this.ngIntroService;i.setOptions({scrollToElement:!1,showStepNumbers:!1,hidePrev:!0,exitOnEsc:!0,exitOnOverlayClick:!1,steps:[{element:f("#files-tree").get(0),intro:"You can browse all the files contained in the project. Click on the file name to open the selected file. Each file will be opened in separate tab.",position:"right"},{element:f("#task-definition-tab").get(0),intro:"Full task description is always visible in the first tab.",position:"right"},{element:f(".comments-panel").get(0),intro:"To add a comment open any file, select a code fragment in the editor, press &quot;c&quot; and write your thoughts about the selected code.",position:"left"}]}),i.onExit(function(){var n=new Date(Date.now()+36e5);e.put(t,"1",{expires:n})}),n(function(){return i.start()})}},e.prototype.$onDestroy=function(){this.ngIntroService.clear()},e.prototype.initFirebaseSync=function(){var e,t=this,n=this.firebaseService;n&&n.getCurrentPageRef()&&(n.registerOnValue("comments","value",function(e){var i=Array.isArray(e.comments)?e.comments:[];if(!t.firebaseInitialized){var o=i.length;t.task.comments.forEach(function(e){-1===i.findIndex(function(t){return t.uiId===e.uiId})&&i.push(e)}),i.length>o&&n.setChildValue("comments",{comments:i}),t.firebaseInitialized=!0}t.syncComments(i)}),null===(e=n.getCurrentPageRef())||void 0===e||e.child("comments").update({init:!0}))},e.prototype.commentsStorageKey=function(){return"comments-"+this.task.id+"-"+this.examService.getExamToken()},e.prototype.decorateFileTree=function(e){var t=this.$rootScope,n=Array.isArray(e)?Ie()(e,function(e){return encodeURIComponent(e.fileHash)}):{};t.$broadcast("updateCommentsCounts",n)},e.prototype.syncComments=function(e){var t=Array.isArray(this.task.comments)?this.task.comments:[];this.task.comments=t,ue()(t,function(t){return-1===e.findIndex(function(e){return e.uiId===t.uiId})}),e.forEach(function(e){var n=t.find(function(t){return t.uiId===e.uiId});n?(n.text=e.text,n.editMode=e.editMode):t.push(e)}),this.localStorageService.set(this.commentsStorageKey(),t)},e.prototype.getActiveFileHash=function(){return this.FileService.getActiveFileHash()},e.prototype.isSpectator=function(){return this.examService.isSpectator()},e}()},je=n("./src/common/code-review/code-review.module.ts"),Be=i.module("exam.steps.codeReview",[je.a,o.a,Me.a,"exam.comments","exam.files",r.name]).component(Ae.selector,Ae).directive("codeReviewLayout",["$rootScope",function(e){return{restrict:"A",link:function(t,n){function i(){return n.children(".main-content")}t.$on("angular-resizable.resizing",function(e,t){if("left-sidebar"===t.id){var n={left:t.width};i().css(n)}if("right-sidebar"===t.id){var o={right:t.width};i().css(o)}}),t.$on("angular-resizable.resizeEnd",function(){e.$broadcast("refreshEditor")})}}}]).name,Oe=n("./node_modules/checklist-model/checklist-model.js"),_e=n("./node_modules/lodash/debounce.js"),Re=n.n(_e),Le={selector:"codegapsEditor",template:n("./src/app/exam/steps/questions/codegaps-editor.component.html"),styles:[n("./src/app/exam/steps/questions/codegaps-editor.component.less")],bindings:{task:"<",readonly:"<"},controller:function(){function e(e,t,n,i,o,s){var r=this;this.$rootScope=e,this.$scope=t,this.$timeout=n,this.codeMirror=i,this.dialogs=o,this.firebaseService=s,this.editorOptions={readOnly:!0,lineWrapping:!0,lineNumbers:!0,mode:"java",styleActiveLine:!0,autoCloseBrackets:!0,autoCloseTags:!0,inputStyle:"textarea",selectionPointer:!0,onLoad:function(e){return r.codemirrorLoaded(e)}}}return e.$inject=["$rootScope","$scope","$timeout","codeMirror","dialogs","firebaseService"],e.prototype.$onInit=function(){var e=this;Array.isArray(this.task.filledGaps)||(this.task.filledGaps=[]);var t=this,n=t.$scope,i=t.dialogs,o=t.editorInstance;n.$watchCollection(function(){return e.task.filledGaps},function(){var t=!1;if(e.task.filledGaps.forEach(function(e,n,i){e.length>255&&(t=!0,i[n]=e.substr(0,255))}),t)return i.error("Max answer length exceeded","Single code gap answer cannot exceed <strong>".concat(255," characters</strong>. Your answer will be trimmed accordingly.")),void o.fillGapsWithModel()}),n.$on("refreshFileNodeEditor",function(){e.refreshEditor()}),n.$on("fillGapsWithModel",function(t,n){n.taskId===e.task.id&&e.editorInstance.fillGapsWithModel()})},e.prototype.loadMode=function(){var e=this.task;if(e&&e.mode){var t=this.codeMirror.findModeByName(e.mode);t&&(this.editorInstance.setOption("mode",t.mime),this.codeMirror.autoLoadMode(this.editorInstance,t.mode))}},e.prototype.refreshEditor=function(){var e=this,t=this.$scope,n=this.$timeout;t.$evalAsync(function(){n(function(){e.editorInstance.refresh()},0)})},e.prototype.codemirrorLoaded=function(e){var t=this;this.editorInstance=e,this.loadMode(),this.refreshEditor(),e.setOption("codeGapsReadOnly",this.readonly),e.on("updateFilledGaps",function(){t.$timeout(function(){var e=t,n=e.firebaseService,i=e.task,o={type:"gapsChanged",taskId:i.id,filledGaps:i.filledGaps};n.addPageActivity(o),n.setChildValue("task-"+i.id,{id:i.id,filledGaps:i.filledGaps})},100)}),this.$scope.$evalAsync(function(){t.$timeout(function(){var e=t,n=e.$rootScope,i=e.task;i.gaps&&i.gaps.length&&(i.gaps.forEach(function(e){e&&e.value&&(i.filledGaps[e.gapOrder]=e.value)}),n.$broadcast("fillGapsWithModel",{taskId:i.id})),t.editorInstance.recreateGapsForCandidate(i.gaps,i.filledGaps)},0)})},e}()},De=n("./src/common/markdown-editor/index.ts"),qe=n("./src/common/markdown/index.ts"),He=n("./src/app/exam/layout/confirm-next-step-modal.component.ts"),Ne=n("./src/common/utils/emoji.ts"),ze={selector:"questionsStep",template:n("./src/app/exam/steps/questions/questions-step.component.html"),styles:[n("./src/app/exam/steps/questions/questions-step.component.less")],bindings:{assignment:"=",exam:"=",onNextAssignment:"&"},controller:function(){function e(e,t,n,i,o,s,r,a){this.$q=e,this.$rootScope=t,this.$scope=n,this.$timeout=i,this.dialogs=o,this.examService=s,this.firebaseService=r,this.logger=a,this.loadingNextAssignment=!1,this._tabs=Object.create(null),this.firebaseInitialized=!1,this.essayCharactersLeft=Object.create(null)}return e.$inject=["$q","$rootScope","$scope","$timeout","dialogs","examService","firebaseService","logger"],e.prototype.$onInit=function(){var e=this,t=this,n=t.$rootScope,i=t.$scope,o=t.firebaseService,s=t.logger;this.assignment.tasks.forEach(function(t){switch(t.type){case u.e.ESSAY:t.answer=t.value,e.essayAnswerChanged(t);break;case u.e.MULTI_CHOICE:t.selectedChoices=t.choices.filter(function(e){return e.selected}).map(function(e){return e.id})}}),i.$watch(function(){return o.isEnabled()},function(t){t&&!e.firebaseInitialized&&(e.firebaseInitialized=!0,e.assignment.tasks.forEach(function(t){try{o.registerOnValue("task-"+t.id,"value",function(s){s&&i.$evalAsync(function(){s.selectedChoices?t.selectedChoices=s.selectedChoices:s.textAnswer&&s.textAnswer!==t.answer?o.isCurrentUser(s.uid)||(t.answer=s.textAnswer,t.type===u.e.ESSAY&&e.essayAnswerChanged(t)):s.filledGaps&&(Array.isArray(t.filledGaps)||(t.filledGaps=[]),Object.entries(s.filledGaps).forEach(function(e){var n=e[0],i=e[1];t.filledGaps[n]!==i&&(t.filledGaps[n]=i)}),o.log("Filled gaps after processing value change",t.filledGaps),n.$broadcast("fillGapsWithModel",{taskId:t.id}))})})}catch(r){s.error("Error while connecting firebase to question "+r)}}))})},e.prototype.tabs=function(e){var t=this._tabs;return t[e.id]||(t[e.id]={activeTab:"edit",is:function(e){return this.activeTab===e},show:function(e){this.activeTab=e}}),t[e.id]},e.prototype.isSpectator=function(){return this.examService.isSpectator()},e.prototype.isNextAssignmentAvailable=function(){return this.assignment&&!!this.assignment.nextAssignment},e.prototype.goToNextAssignment=function(){var e=this;return this.exam.oneDirection?this.dialogs.open({component:He.a.selector,size:"lg",keyboard:!0,backdrop:"static",windowClass:"payment-form-modal colored-header",resolve:{nextAssignmentAvailable:function(){return e.isNextAssignmentAvailable()}}}).result.then(function(){return e.runOnNextAssignment()}):this.runOnNextAssignment()},e.prototype.runOnNextAssignment=function(){var e=this;return this.loadingNextAssignment=!0,this.$q.resolve().then(function(){return e.onNextAssignment()}).catch(function(){e.loadingNextAssignment=!1})},e.prototype.nextAssignmentLabel=function(){switch(this.assignment.nextAssignmentType){case"SINGLE_QUESTION":return"Next question";case"QUESTIONS":return"Next questions";default:return"Next task"}},e.prototype.finishExam=function(){this.$rootScope.$broadcast("finishExam")},e.prototype.isStaticItem=function(e){return"STATIC"===e.itemType},e.prototype.isInputItem=function(e){return"INPUT"===e.itemType},e.prototype.isTaskItem=function(e){return!this.isStaticItem(e)&&!this.isInputItem(e)},e.prototype.showTaskIndex=function(e){return this.assignment.tasks.length>1},e.prototype.textChanged=function(e){var t=this;this.$timeout(function(){var n=t.firebaseService,i={type:"essayAnswerChanged",taskId:e.id};e.answer&&(i.textAnswer=e.answer),n.addPageActivity(i),n.setChildValue("task-"+e.id,{id:e.id,textAnswer:e.answer})},100)},e.prototype.choiceChanged=function(e,t){var n=this;this.$timeout(function(){var i=n.firebaseService,o={type:"choiceChanged",taskId:e.id,selectedChoices:e.selectedChoices,choiceChanged:t.id};i.addPageActivity(o),i.setChildValue("task-"+e.id,{id:e.id,selectedChoices:e.selectedChoices})},100)},e.prototype.essayAnswerChanged=function(e){var t=Object(Ne.b)(e.answer||"");this.essayCharactersLeft[e.id]=8192-t.length,this.examService.areCurrentPageAnswersValid=Object.values(this.essayCharactersLeft).every(function(e){return+e>=0})},e.prototype.areCurrentPageAnswersValid=function(){return this.examService.areCurrentPageAnswersValid},e}()},We=i.module("exam.steps.questions",[Oe,qe.a,De.a]).component(Le.selector,Le).component(ze.selector,ze).directive("syncFirebaseState",["$parse","firebaseService",function(e,t){return{require:"ngModel",scope:!1,link:function(n,i,o,s){var r=e(o.syncFirebaseState),a=Re()(function(){var e=r(n),i={type:"essayAnswerChanged",taskId:e.id};e.answer&&(i.textAnswer=e.answer),t.addPageActivity(i),t.setChildValue("task-"+e.id,{id:e.id,textAnswer:e.answer})},300);s.$viewChangeListeners.push(a)}}}]).name,Ue=n("./src/common/services/logger.service.ts"),Ve={selector:"sqlEditLayout",restrict:"A",controller:function(){function e(e,t,n,i){this.$element=e,this.$rootScope=t,this.$scope=n,this.$timeout=i,this.sidebarCollapsed=!1,this.buildPanelCollapsed=!1,this.sidebarCollapseInfo={left:0,width:0},this.buildPanelCollapseInfo={bottom:0,mainContentHeight:0,buildPanelTop:0,buildPanelHeight:0}}return e.$inject=["$element","$rootScope","$scope","$timeout"],e.prototype.$onInit=function(){var e=this,t=this,n=t.$scope,i=t.$rootScope,o=t.$element;n.$on("angular-resizable.resizing",function(t,n){var i=o.children(".main-content");if("left-sidebar"===n.id){var s={left:n.width};i.css(s),e.getBuildPanel().css(s)}if("right-sidebar"===n.id){var r={right:n.width};i.css(r),e.getBuildPanel().css(r)}"main-panel"===n.id&&e.getBuildPanel().css({height:"auto",top:n.height})}),n.$on("angular-resizable.resizeEnd",function(){i.$broadcast("refreshEditor")})},e.prototype.getBuildPanel=function(){return this.$element.children(".build-panel-wrapper")},e.prototype.getMainContent=function(){return this.$element.children(".main-content")},e.prototype.getLeftSidebar=function(){return this.$element.children(".left-sidebar")},e.prototype.isMainPanelExpanded=function(){return this.buildPanelCollapsed&&this.sidebarCollapsed},e.prototype.expandMainPanel=function(){this.buildPanelCollapsed||this.collapseBuildPanel(),this.sidebarCollapsed||this.collapseSidebar()},e.prototype.compressMainPanel=function(){this.buildPanelCollapsed&&this.showBuildPanel(),this.sidebarCollapsed&&this.showSidebar()},e.prototype.toggleBuildPanel=function(){this.buildPanelCollapsed?this.showBuildPanel():this.collapseBuildPanel()},e.prototype.collapseBuildPanel=function(){var e=this;this.buildPanelCollapsed=!0;var t=this.getBuildPanel(),n=this.getMainContent(),i=this.buildPanelCollapseInfo;i.buildPanelHeight=t.css("height"),i.buildPanelTop=t.css("top"),i.bottom=n.css("bottom"),i.mainContentHeight=n.css("height"),t.css({height:"30px",top:"auto",bottom:0}),n.css({bottom:"30px",height:"auto"}),t.addClass("collapsed"),n.addClass("build-panel-collapsed"),this.$timeout(function(){e.$rootScope.$broadcast("refreshEditor")},500)},e.prototype.showBuildPanel=function(){var e=this;this.buildPanelCollapsed=!1;var t=this.getBuildPanel(),n=this.getMainContent(),i=this.buildPanelCollapseInfo;t.css({height:i.buildPanelHeight,top:"auto",bottom:0}),n.css({bottom:i.bottom,height:i.mainContentHeight}),t.removeClass("collapsed"),n.removeClass("build-panel-collapsed"),this.$timeout(function(){e.$rootScope.$broadcast("refreshEditor")},500)},e.prototype.toggleSidebar=function(){this.sidebarCollapsed?this.showSidebar():this.collapseSidebar()},e.prototype.collapseSidebar=function(){var e=this;this.sidebarCollapsed=!0;var t=this.sidebarCollapseInfo;t.left=this.getMainContent().css("left"),t.width=this.getLeftSidebar().css("width"),this.getLeftSidebar().css({width:"30px"}),this.getMainContent().css({left:"40px"}),this.getBuildPanel().css({left:"40px"});var n=this.$rootScope,i=this.$timeout;i(function(){e.getLeftSidebar().addClass("collapsed")},100),i(function(){n.$broadcast("refreshEditor")},500)},e.prototype.showSidebar=function(){var e=this,t=e.sidebarCollapseInfo,n=e.$timeout,i=e.$rootScope;this.sidebarCollapsed=!1,this.getLeftSidebar().removeClass("collapsed"),this.getLeftSidebar().css({width:t.width}),this.getMainContent().css({left:t.left}),this.getBuildPanel().css({left:t.left}),n(function(){i.$broadcast("refreshEditor")},500)},e}()},Ge={selector:"sqlEditStep",template:n("./src/app/exam/steps/sql-edit/sql-edit-step.component.html"),styles:[n("./src/app/exam/steps/sql-edit/sql-edit-step.component.less")],bindings:{task:"<",pageNumber:"<"},controller:function(){function e(e,t,n,i,o,s){this.$element=e,this.$scope=t,this.buildService=n,this.FileService=i,this.logger=o,this.hotkeys=s,this.tabs={activeTab:"build-console",is:function(e){return this.activeTab===e},show:function(e){this.activeTab=e}}}return e.$inject=["$element","$scope","buildService","FileService","logger","hotkeys"],e.prototype.$onInit=function(){var e=this,t=this,n=t.$scope,i=t.buildService,o=t.FileService,s=t.hotkeys,r=t.task;if("SOQL"===r.projectType){var a=r.files.find(function(e){return"query.txt"===e.name})||this.FileService.createFile("","query.txt");r.fileHashes=r.fileHashes||{},r.fileHashes.QUERY=a,r.mode="SOQL",this.refreshFiles()}this.lastBuild=i.getLastBuild();var l=this;this.editorTabs={activeTab:"candidateQuery",is:function(e){return this.activeTab===e},show:function(e){var t=l.task.fileHashes;this.activeTab=e,"candidateQuery"===e?o.openFile(t.QUERY.hash):"candidateScript"===e&&o.openFile(t.SCRIPT.hash)}},i.clearBuilds(),i.connectToFirepad(),n.$on("buildService.buildReceived",function(t,n){e.lastBuild=n}),n.$watch(function(){return i.getBuilds().length},function(){e.lastBuild=i.getLastBuild(),e.tabs.show("build-console")}),n.$watch(function(){return e.lastBuild&&e.lastBuild.result},function(){e.lastBuild&&e.lastBuild.result.buildStatus&&e.logger.debug("Last build result changed for SQL task: result="+e.lastBuild.result.buildStatus)},!0),s.add({combo:"f9",description:"Run & validate",callback:function(){i.buildProject(!0)}})},e.prototype.$postLink=function(){this.layout=this.$element.find("[sql-edit-layout]").controller("sqlEditLayout")},e.prototype.$onChanges=function(e){e.task&&this.refreshFiles()},e.prototype.$onDestroy=function(){this.hotkeys.del("f9")},e.prototype.refreshFiles=function(){var e=this.FileService,t=this.task.fileHashes,n=[];if(t){var i=t.QUERY,o=t.SCRIPT;i&&(this.logger.info("[sqlEditStep] task.fileHashes.QUERY = ".concat(JSON.stringify(i.name))),n.push(i)),o&&(this.logger.info("[sqlEditStep] task.fileHashes.SCRIPT = ".concat(JSON.stringify(o.name))),n.push(o))}else this.logger.info("[sqlEditStep] task.fileHashes is empty");e.setFiles(n),n.length>0?(this.logger.info("[sqlEditStep] Number of files in the task: ".concat(n.length,", opening: ").concat(n[0].name)),e.openFile(n[0].hash)):this.logger.info("[sqlEditStep] No files to open")},e.prototype.sqlModeInfo=function(){var e=this.task;return"MYSQL"===e.mode?"MySQL 8":"POSTGRES"===e.mode?"PostgreSQL 11":"ORACLE"===e.mode?"Oracle 11":"MSSQL"===e.mode?"SQL Server 2017":"HSQLDB"===e.mode?"HSQLDB":"SOQL"===e.mode?"SOQL":"Plain SQL"},e.prototype.isQueryEditingAvailable=function(){var e;return Boolean(null===(e=this.task.fileHashes)||void 0===e?void 0:e.QUERY)},e.prototype.isScriptEditingAvailable=function(){var e;return Boolean(null===(e=this.task.fileHashes)||void 0===e?void 0:e.SCRIPT)},e.prototype.isQueryFileModified=function(){var e,t=this.FileService,n=null===(e=this.task.fileHashes)||void 0===e?void 0:e.QUERY;return n&&t.isModified(n.hash)},e.prototype.isScriptFileModified=function(){var e,t=this.FileService,n=null===(e=this.task.fileHashes)||void 0===e?void 0:e.SCRIPT;return n&&t.isModified(n.hash)},e}()},Qe=i.module("exam.steps.sqlEdit",["cfp.hotkeys",D,q.a,ge,Ue.a,qe.a,Me.a]).component(Ge.selector,Ge).directive(Ve.selector,Object(_.a)(Ve)).name,Ye=i.module("exam.steps",[o.a,Te,Be,We,Qe]).component(s.selector,s).name},"./src/app/exam/steps/questions/codegaps-editor.component.html":function(e,t){e.exports='<textarea ui-codemirror="$ctrl.editorOptions" ng-model="$ctrl.task.snippet"></textarea>\n'},"./src/app/exam/steps/questions/codegaps-editor.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/steps/questions/questions-step.component.html":function(e,t){e.exports='<div class="content-container">\n  <div class="questions-list">\n    <div class="question" ng-repeat="task in $ctrl.assignment.tasks">\n      <div class="question__header" ng-if="$ctrl.isTaskItem(task)">\n        <task-feedback task="task"></task-feedback>\n        <h2>Question <span ng-if="$ctrl.showTaskIndex(task)">#{{ task.index }}</span></h2>\n      </div>\n      <div class="question__content" ng-class=" { \'limited-access-question\' : task.limitedAccess }">\n        <div class="limited-access alert alert-warning alert-block" ng-if="task.limitedAccess">\n          <strong>\n            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Limited access!\n          </strong>\n          <strong>Upgrade your plan to access this task.</strong>\n        </div>\n        <markdown-content\n          item="task" exam="$ctrl.exam"\n          ng-if="$ctrl.isStaticItem(task) && task.type == \'MARKDOWN\'"\n        ></markdown-content>\n        <form ng-if="$ctrl.isInputItem(task) && task.inputType !== \'PHOTO_CAPTURE\'">\n          <candidate-input item="task" exam="$ctrl.exam" ng-model="task.value"></candidate-input>\n        </form>\n        <div ng-if="$ctrl.isInputItem(task) && task.inputType === \'PHOTO_CAPTURE\'">\n          <candidate-input item="task" exam="$ctrl.exam" ng-model="task.value"></candidate-input>\n        </div>\n        <div class="question__text" render-markdown="task.question" ng-if="$ctrl.isTaskItem(task)"></div>\n\n        <div ng-switch on="task.type">\n          <div ng-switch-when="CODE_GAPS">\n            <codegaps-editor task="task" readonly="$ctrl.isSpectator()"></codegaps-editor>\n          </div>\n          <div ng-switch-when="ESSAY">\n            <ul class="nav nav-tabs nav-tabs-inner" role="tablist">\n              <li ng-class="{ \'active\' : $ctrl.tabs(task).is(\'edit\') }">\n                <a href role="tab" ng-click="$ctrl.tabs(task).show(\'edit\')">Edit</a>\n              </li>\n              <li ng-class="{ \'active\' : $ctrl.tabs(task).is(\'preview\') }">\n                <a href role="tab" ng-click="$ctrl.tabs(task).show(\'preview\')">Preview</a>\n              </li>\n            </ul>\n            <div class="tab-content inner" style="margin-bottom: 0;">\n              <div class="tab-pane" ng-class="{ \'active\' : $ctrl.tabs(task).is(\'edit\') }">\n                <markdown-editor\n                  content="task.answer"\n                  ng-model="task.answer"\n                  ng-change="$ctrl.essayAnswerChanged(task)"\n                  sync-firebase-state="task"\n                  show-preview="false"\n                  image-picker="{ gallery: false }"\n                ></markdown-editor>\n                <p class="clearfix help-block text-muted">\n                  <span\n                    class="pull-right"\n                    ng-class="{ \'text-danger\': $ctrl.essayCharactersLeft[task.id] < 0 }"\n                  >\n                    Characters left: {{ $ctrl.essayCharactersLeft[task.id] }}\n                  </span>\n                  <span>You can use Markdown syntax to format the text.</span>\n                </p>\n              </div>\n              <div class="tab-pane" ng-class="{ \'active\' : $ctrl.tabs(task).is(\'preview\') }">\n                <div class="answer-preview" render-markdown="task.answer"></div>\n              </div>\n            </div>\n\n            <div class="alert alert-danger mt-4 mb-0" ng-if="$ctrl.essayCharactersLeft[task.id] < 0">\n              The essay is too long.\n            </div>\n          </div>\n          <fieldset ng-switch-when="MULTI_CHOICE" class="question__choices">\n            <legend class="sr-only">\n              {{ ::task.singleChoice ? \'Choose the right answer\' : \'Choose the right answers\' }}\n            </legend>\n\n            <div\n              ng-repeat="choice in task.choices"\n              ng-if="task.singleChoice"\n              class="question__choice"\n            >\n              <input\n                type="radio"\n                ng-model="task.selectedChoices"\n                ng-change="$ctrl.choiceChanged(task, choice)"\n                ng-value="{{ choice.id }}"\n                ng-disabled="$ctrl.isSpectator()"\n                name="optionsRadios{{ task.id }}"\n                id="optionsRadios{{ task.id }}_{{ $index }}"\n              />\n              <label for="optionsRadios{{ task.id }}_{{ $index }}">\n                <div class="question__radio"></div>\n                <span render-markdown="choice.text"></span>\n              </label>\n            </div>\n\n            <div\n              ng-repeat="choice in task.choices"\n              ng-if="!task.singleChoice"\n              class="question__choice"\n            >\n              <input\n                type="checkbox"\n                checklist-model="task.selectedChoices"\n                checklist-value="choice.id"\n                ng-change="$ctrl.choiceChanged(task, choice)"\n                ng-disabled="$ctrl.isSpectator()"\n                name="optionsCheckboxes{{ task.id }}"\n                id="optionsCheckboxes{{ task.id }}_{{ $index }}"\n              />\n              <label for="optionsCheckboxes{{ task.id }}_{{ $index }}">\n                <div class="question__checkbox">\n                  <dvsk-icon icon="check" size="18"></dvsk-icon>\n                </div>\n                <span render-markdown="choice.text"></span>\n              </label>\n            </div>\n\n          </fieldset>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="!$ctrl.isSpectator()" class="next-step">\n    <button\n      dvsk-button size="large"\n      loading="$ctrl.loadingNextAssignment"\n      icon="fa fa-angle-right"\n      ng-if="$ctrl.isNextAssignmentAvailable()"\n      ng-click="$ctrl.goToNextAssignment()"\n      ng-disabled="!$ctrl.areCurrentPageAnswersValid()"\n    >\n      {{ $ctrl.nextAssignmentLabel() }}\n    </button>\n    <button\n      dvsk-button size="large"\n      ng-if="!$ctrl.isNextAssignmentAvailable()"\n      ng-click="$ctrl.finishExam()"\n      ng-disabled="!$ctrl.areCurrentPageAnswersValid()"\n    >\n      Finish test\n    </button>\n  </div>\n</div>\n'},"./src/app/exam/steps/questions/questions-step.component.less":function(e,t,n){"use strict";n.r(t)},"./src/app/exam/steps/sql-edit/sql-edit-step.component.html":function(e,t){e.exports='<div class="step-pane-content sql-edit-page">\n\n  <div class="panels-container" sql-edit-layout>\n    <div class="left-sidebar" id="left-sidebar" resizable r-directions="[\'right\']" r-width="600">\n\n      <div class="collapsed-problem-description" ng-click="$ctrl.layout.showSidebar()">\n        <div class="show-problem-description-button">Task description</div>\n      </div>\n      <div class="problem-description-panel">\n\n        <div class="block-flat">\n          <div class="header">\n            <span class="fa fa-angle-double-left pull-right"\n                  ng-class="{ \'fa-angle-double-left\': $ctrl.layout.sidebarCollapsed, \'fa-angle-double-down\': !$ctrl.layout.sidebarCollapsed }"\n                  ng-click="$ctrl.layout.toggleSidebar()"></span>\n            <h3>Task description</h3>\n          </div>\n          <div class="content">\n            <div id="task-definition">\n              <div class="question-text" render-markdown="$ctrl.task.question"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="main-content" id="main-panel" resizable\n         r-directions="[\'bottom\']">\n      <div class="expand-editor-button fa fa-expand" ng-click="$ctrl.layout.expandMainPanel()" ng-show="!$ctrl.layout.isMainPanelExpanded()"\n           uib-tooltip="Expand editor" tooltip-placement="left" tooltip-append-to-body="true"></div>\n      <div class="expand-editor-button fa fa-compress" ng-click="$ctrl.layout.compressMainPanel()" ng-show="$ctrl.layout.isMainPanelExpanded()"\n           uib-tooltip="Collapse editor" tooltip-placement="left" tooltip-append-to-body="true"></div>\n      <div class="main-content-wrapper">\n        <div class="tab-container">\n          <ul class="nav nav-tabs">\n            <li ng-class="{ \'active\' : $ctrl.editorTabs.is(\'candidateQuery\') }" ng-if="$ctrl.isQueryEditingAvailable()">\n              <a href ng-click="$ctrl.editorTabs.show(\'candidateQuery\')">\n                <span ng-show="$ctrl.isQueryFileModified()">*</span>\n                <span class="file-name" title="Query editor">Query editor</span>\n              </a>\n            </li>\n            <li ng-class="{ \'active\' : $ctrl.editorTabs.is(\'candidateScript\') }" ng-if="$ctrl.isScriptEditingAvailable()">\n              <a href ng-click="$ctrl.editorTabs.show(\'candidateScript\')">\n                <span ng-show="$ctrl.isScriptFileModified()">*</span>\n                <span class="file-name" title="Query editor">Script editor</span>\n              </a>\n            </li>\n          </ul>\n          <div class="tab-content">\n            <div class="limited-access alert alert-warning alert-block" ng-if="$ctrl.task.limitedAccess">\n              <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n              <strong>Limited access! Upgrade your plan to access this task.</strong>\n            </div>\n            <div id="code-editor" class="editor-tab tab-pane cont active">\n              <div class="editor-container">\n                <code-editor class="code-editor-wrapper" sql-mode="true"></code-editor>\n              </div>\n              <editor-status-bar additional-mode-info="$ctrl.sqlModeInfo()"></editor-status-bar>\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n    </div>\n\n    <div class="build-panel-wrapper" id="build-panel-wrapper">\n      <div class="build-panel-buttons" ng-if="$ctrl.task.projectType === \'SOQL\'">\n        <button\n          build-project-button\n          task="$ctrl.task"\n          tabs="$ctrl.tabs"\n          tab="build-console"\n          class="toolbar-btn btn btn-primary"\n          ng-if="!$ctrl.isSpectator()"\n        ></button>\n        <button\n          build-project-button\n          task="$ctrl.task"\n          tabs="$ctrl.tabs"\n          tab="build-console"\n          class="toolbar-btn btn btn-primary"\n          ng-if="!$ctrl.isSpectator() && $ctrl.isQuickBuildSupported()"\n          quick-build="true"\n        ></button>\n      </div>\n\n      <div class="collapsed-build-panel">\n        <span ng-click="$ctrl.layout.showBuildPanel(\'build-console\')"> Results\n          <span class="fa fa-exclamation-triangle color-warning" uib-tooltip="Last build: Tests failed"\n                tooltip-append-to-body="true" ng-show="$ctrl.lastBuild.isTestFailure()"></span>\n          <span class="fa fa-times-circle color-danger" uib-tooltip="Last build: failed" tooltip-append-to-body="true"\n                ng-show="$ctrl.lastBuild.isFailure()"></span>\n          <span class="fa fa-check-circle color-success" uib-tooltip="Last build: Success!" tooltip-append-to-body="true"\n                ng-show="$ctrl.lastBuild.isSuccess()"></span></span>\n\n        <span class="filler" ng-click="$ctrl.layout.showBuildPanel()">\n          <span class="show-console fa fa-angle-double-up" uib-tooltip="Show" tooltip-append-to-body="true"\n                ng-click="$ctrl.layout.showBuildPanel()"></span>\n        </span>\n      </div>\n      <div class="tab-container">\n        <ul class="nav nav-tabs">\n          <li ng-class="{ \'active\' : $ctrl.tabs.is(\'build-console\') }">\n            <a href ng-click="$ctrl.tabs.show(\'build-console\')">\n              <i class="fa fa-terminal" aria-hidden="true"></i>\n              <span class="tab-label">Results</span>\n              <span class="fa fa-exclamation-triangle color-warning" uib-tooltip="Last build: Tests failed"\n                    tooltip-append-to-body="true" ng-show="$ctrl.lastBuild.isTestFailure()"></span>\n              <span class="fa fa-times-circle color-danger" uib-tooltip="Last build: failed" tooltip-append-to-body="true"\n                    ng-show="$ctrl.lastBuild.isFailure()"></span>\n              <span class="fa fa-check-circle color-success" uib-tooltip="Last build: Success!"\n                    tooltip-append-to-body="true"\n                    ng-show="$ctrl.lastBuild.isSuccess()"></span>\n              <span class="fa fa-angle-double-left pull-right"\n                    ng-class="{ \'fa-angle-double-left\': $ctrl.layout.buildPanelCollapsed, \'fa-angle-double-down\': !$ctrl.layout.buildPanelCollapsed }"\n                    ng-click="$ctrl.layout.toggleBuildPanel()"></span>\n            </a>\n          </li>\n        </ul>\n        <span class="hide-console fa fa-angle-double-down" uib-tooltip="Hide" tooltip-append-to-body="true"\n              ng-click="$ctrl.layout.collapseBuildPanel()"></span>\n\n        <div class="tab-content">\n          <div class="tab-pane cont" ng-class="{ \'active\' : $ctrl.tabs.is(\'build-console\') }">\n            <section class="build-panel-tab-pane" ng-if="$ctrl.task.type === \'SQL\'">\n              <exam-sql-build-panel task="$ctrl.task" last-build="$ctrl.lastBuild"></exam-sql-build-panel>\n            </section>\n            <section class="build-panel-tab-pane" ng-if="$ctrl.task.projectType === \'SOQL\'">\n              <build-panel task="$ctrl.task" last-build="$ctrl.lastBuild" tabs="$ctrl.tabs"></build-panel>\n            </section>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n'},"./src/app/exam/steps/sql-edit/sql-edit-step.component.less":function(e,t,n){"use strict";n.r(t)},"./src/common/code-editor/code-editor.component.less":function(e,t,n){"use strict";n.r(t)},"./src/common/code-editor/code-editor.component.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("./node_modules/angular/index.js"),o=n("./node_modules/firepad/dist/firepad.js"),s=n("./src/common/codemirror/index.ts"),r=n("./src/common/utils/detect-indent.ts"),a=function(){return a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},l={selector:"codeEditor",template:'\n    <div class="code-editor__overlay">\n      <dvsk-loader centered></dvsk-loader>\n    </div>\n    <div class="code-editor__wrapper"></div>\n  ',styles:[n("./src/common/code-editor/code-editor.component.less")],bindings:{readonly:"<",violations:"<",sqlMode:"<"},controller:function(){function e(e,t,n,i,o,s,r,a,l,c,d,u){this.$compile=t,this.$element=n,this.$rootScope=i,this.$scope=o,this.$timeout=s,this.examService=r,this.FileService=a,this.hotkeys=l,this.logger=c,this.codeEditorService=d,this.codeMirror=u,this.readonly=!1,this.violationWidgets=[],this.sqlMode=!1,this.savedPositions={},this.editorDocs={},this.keymap=[{combo:"ctrl+d",description:"Delete line"},{combo:"ctrl+z",description:"Undo"},{combo:"shift+ctrl+z",description:"Redo"},{combo:"ctrl+up",description:"Go Line up"},{combo:"ctrl+down",description:"Go Line down"},{combo:"ctrl+left",description:"Go group left"},{combo:"ctrl+right",description:"Go group down"},{combo:"ctrl+s",description:"Save"},{combo:"ctrl+f",description:"Find"},{combo:"ctrl+g",description:"Find next"},{combo:"shift+ctrl+g",description:"Find previous"},{combo:"shift+ctrl+f",description:"Replace"},{combo:"shift+ctrl+r",description:"Replace all"},{combo:"ctrl+[",description:"Indent less"},{combo:"ctrl+]",description:"Indent more"}],this.firebaseService=e.has("firebaseService")?e.get("firebaseService"):void 0}return e.$inject=["$injector","$compile","$element","$rootScope","$scope","$timeout","examService","FileService","hotkeys","logger","codeEditorService","codeMirror"],e.prototype.$onChanges=function(){this.synchronizeViolations()},e.prototype.$onInit=function(){var e=this,t=this.codeMirror;s.a.commands.save=function(e){!e.getOption("readOnly")&&e.onSave&&e.onSave()},s.a.commands.autocomplete=function(e){e.showHint({hint:s.a.hint.anyword})},this.savedPositions={},this.editorDocs={},this.initEditor();var n=this.sqlMode?t.findModeByExtension("sql"):t.findModeByExtension("java");this.setEditorMode(n);var i=this.$scope,o=this.editor;i.$on("refreshEditor",function(){e.refreshEditor()}),i.$on("revertedFileContent",function(t,n){n.hash===e.currentFileHash&&(o.firepad?o.firepad.setText(n.content):o.getDoc().setValue(n.content))}),i.$watch(function(){return e.violations},function(t){e.synchronizeViolations()}),i.$watch(function(){var t=e.FileService.getActiveContext(),n=t.file,i=t.line;return{hash:n?n.hash:null,content:n?n.content:null,contentType:n?n.contentType:null,line:i}},function(){e.onActiveFileChange()},!0),this.keymap.forEach(function(t){var n=e.hotkeys;window.navigator&&window.navigator.platform.includes("Mac")&&(t.combo=t.combo.replace("ctrl","command")),n.add({combo:t.combo,description:t.description,callback:function(){},allowIn:["TEXTAREA"]})})},e.prototype.$onDestroy=function(){var e=this.hotkeys;this.keymap.forEach(function(t){return e.del(t.combo)})},e.prototype.initEditor=function(){var e=this,t=this.$element,n=this.$rootScope,i=this.codeMirror.create(t.children(".code-editor__wrapper"),{readOnly:!1,lineNumbers:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],lineWrapping:!0,styleActiveLine:!0,autoCloseBrackets:!0,autoCloseTags:!0,selectionPointer:!0,extraKeys:{"Ctrl-Space":"autocomplete",F9:function(){n.$broadcast("buildCurrentProject",{saveAll:e.sqlMode})}}}),o=this,s=o.$timeout,r=o.$scope,a=o.FileService;i.onSave=function(){e.FileService.saveActiveFile()},i.on("changes",function(){e.isOpeningInProgress||s(function(){r.$apply(function(){e.currentFileHash&&a.setFileContent(e.currentFileHash,i.getDoc().getValue())})})}),this.editor=i},e.prototype.onActiveFileChange=function(){var e,t,n=this,i=this,r=i.$element,a=i.$timeout,l=i.FileService,c=i.editor,d=i.firebaseService,u=i.logger;null===(t=(e=r.find(".nav-tabs")).tabdrop)||void 0===t||t.call(e,"layout");var p=l.getActiveContext();if(p.file){var h=p.file,m=this.editor;if(this.currentFileHash&&(this.savedPositions[this.currentFileHash]={lastCursorPos:m.getCursor(),lastScrollPos:m.getScrollInfo()},this.editorDocs[this.currentFileHash]=m.getDoc()),c.setOption("readOnly",this.readonly||h.attributes.readOnly),null==h.content)this.currentFileHash=null;else{if(h.hash!==this.currentFileHash){if(this.isOpeningInProgress)return;this.setOpeningInProgress(!0),c.firepad&&c.firepad.dispose(),this.currentFileHash=h.hash,u.info("[codeEditor] Updating editor, firebaseEnabled=".concat(Boolean(null==d?void 0:d.isEnabled())," filename=").concat(this.filename(h.hash),", hash=").concat(h.hash));var f=null==d?void 0:d.getCurrentPageRef();if(f){u.info("[codeEditor] editor.swapDoc filename=".concat(this.filename(h.hash),", hash=").concat(h.hash)),c.swapDoc(s.a.Doc(""));var v=f.child(h.hash);u.info("[codeEditor] Creating firepad");var g=o.fromCodeMirror(v,c,{richTextShortcuts:!1,richTextToolbar:!1}),b=Date.now(),y=!1,$=a(function(){u.warn("[codeEditor] Firepad hasn't initialized within ".concat(3e3," ms")),n.setupEditorForFile(h),y=!0},3e3);g.on("ready",function(){a.cancel($),y?u.warn("[codeEditor] Firepad 'ready' event occured after ".concat(Date.now()-b," ms, but was dismissed")):n.setupEditorForFile(h,g)})}else{var S=this.editorDocs[this.currentFileHash];S?S.setValue(""):S=s.a.Doc(""),c.swapDoc(S),this.isContentEditable(h.contentType)?(c.operation(function(){if("FILE"===h.type){var e=n.findModeByFileName(h.name);n.setEditorMode(e,h)}if(m.getDoc().setValue(h.content||""),n.savedPositions[n.currentFileHash]){var t=n.savedPositions[n.currentFileHash];m.getDoc().setCursor(t.lastCursorPos.line,t.lastCursorPos.ch),t.lastScrollPos.top&&m.scrollTo(null,t.lastScrollPos.top)}}),m.hasFocus()||m.focus()):this.setEditorMode(null),this.setOpeningInProgress(!1)}}p.line&&this.scrollToLine()}this.refreshEditor(),this.synchronizeViolations()}},e.prototype.filename=function(e){try{return atob(e)}catch(t){return"[[ invalid ]]"}},e.prototype.setupEditorForFile=function(e,t){var n=this,i=this,o=i.editor,s=i.examService,r=i.firebaseService,a=i.logger;try{this.isContentEditable(e.contentType)?(o.operation(function(){if("FILE"===e.type){var i=n.findModeByFileName(e.name);n.setEditorMode(i,e)}if(s.isCandidate()&&(t?t.isHistoryEmpty()&&t.getText()!==e.content?(a.info("[codeEditor] firepad.ready Setting file content, filename=".concat(n.filename(e.hash),", hash=").concat(e.hash)),t.setText(e.content)):a.info("[codeEditor] firepad.ready Not setting file content, filename=".concat(n.filename(e.hash),", hash=").concat(e.hash)):(a.info("[codeEditor] firepad not available, setting file content, filename=".concat(n.filename(e.hash),", hash=").concat(e.hash)),o.getDoc().setValue(e.content||""))),n.savedPositions[n.currentFileHash]){var r=n.savedPositions[n.currentFileHash];o.getDoc().setCursor(r.lastCursorPos.line,r.lastCursorPos.ch),r.lastScrollPos.top&&o.scrollTo(null,r.lastScrollPos.top)}}),o.hasFocus()||o.focus(),null==r||r.addPageActivity({type:"file_opened",hash:e.hash}),a.info("[codeEditor] firebase.addPageActivity: type=file_opened, filename=".concat(this.filename(e.hash),", hash=").concat(e.hash))):(a.info("[codeEditor] firepad.ready File not editable: filename=".concat(this.filename(e.hash),", hash=").concat(e.hash)),this.setEditorMode(null))}catch(l){a.warn("[codeEditor] Catched error while switching editor content: ".concat(l))}finally{this.setOpeningInProgress(!1)}},e.prototype.findModeByFileName=function(e){return this.sqlMode?this.codeMirror.findModeByExtension("sql"):this.codeMirror.findModeByFileName(e)},e.prototype.setEditorMode=function(e,t){var n=this,i=n.$element,o=n.$rootScope,s=n.editor,l={indentWithTabs:!1,indentUnit:4,tabSize:4};Object.keys(l).forEach(function(e){s.setOption(e,l[e])});var c=s.getOption("tabSize"),d=Object(r.a)(t&&t.content||"");d&&("\t"===d?(s.setOption("indentWithTabs",!0),s.setOption("indentUnit",c)):(s.setOption("indentWithTabs",!1),s.setOption("indentUnit",d.length))),o.$broadcast("editorModeChanged",a(a({},e),{tabSize:c,indentWithTabs:s.getOption("indentWithTabs"),indentUnit:s.getOption("indentUnit"),readOnly:s.getOption("readOnly")}));var u=i.attr("class").split(/\s+/).filter(function(e){return!/^(tab-size|mode)-/.test(e)});u.push("tab-size-".concat(c)),i.attr("class",u.join(" ")),e&&(this.setModeClass(e.mode),s.setOption("mode",e.mime),this.codeMirror.autoLoadMode(s,e.mode))},e.prototype.setModeClass=function(e){var t=this.$element;this.currentMode&&t.removeClass("mode-".concat(this.currentMode)),this.currentMode=e,t.addClass("mode-".concat(e))},e.prototype.refreshEditor=function(){var e=this,t=this.$scope,n=this.$timeout;t.$evalAsync(function(){n(function(){e.editor.refresh()},0)})},e.prototype.isContentEditable=function(e){return!e||this.codeEditorService.isContentTypeSupported(e)},e.prototype.scrollToLine=function(){var e=this.editor,t=this.FileService.getActiveContext();t.line&&e.scrollIntoView({line:t.line,ch:0})},e.prototype.compileViolationWidget=function(e,t){var n=this.$compile,o=this.$scope,s=this.editor.getDoc(),r=i.element('<code-violation violation="violation"></code-violation>'),a=o.$new();return i.extend(a,t),n(r)(a),s.addLineWidget(e,r.get(0),{coverGutter:!0,insertAt:0})},e.prototype.showViolations=function(e){var t=this;this.violationWidgets.length&&(this.violationWidgets.forEach(function(e){t.editor.getDoc().removeLineWidget(e)}),this.violationWidgets=[]),e&&e.forEach(function(e){var n=t.compileViolationWidget(e.endLine-1,{violation:e});t.violationWidgets.push(n)})},e.prototype.synchronizeViolations=function(){var e=this,t=this.$scope,n=this.FileService;t.$evalAsync(function(){var t=[],i=n.getActiveContext();i.file&&e.violations&&(t=e.violations.filter(function(e){var t;return e.fileHash===(null===(t=i.file)||void 0===t?void 0:t.hash)})),e.showViolations(t)})},e.prototype.setOpeningInProgress=function(e){this.isOpeningInProgress=e;var t=this.$element.find(".code-editor__overlay");e?t.show():t.hide()},e}()}},"./src/common/code-editor/code-editor.module.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("./node_modules/angular/index.js"),o=(n("./node_modules/angular-hotkeys/build/hotkeys.js"),n("./src/common/code-editor/code-editor.component.ts")),s=function(){function e(){this.supportedMimeTypes=["application/javascript","application/json","application/x-csh","application/x-javascript","application/x-latex","application/x-perl","application/x-sh","application/x-tcl","application/x-tex","application/xml","application/xquery"]}return e.prototype.getSupportedMimeTypes=function(){return this.supportedMimeTypes},e.prototype.isContentTypeSupported=function(e){return e.startsWith("text")||this.supportedMimeTypes.some(function(t){return e.startsWith(t)})},e}(),r=n("./src/common/codemirror/index.ts"),a=n("./src/common/services/logger.service.ts"),l=i.module("common.codeEditor",["cfp.hotkeys",r.b,a.a]).service("codeEditorService",s).component(o.a.selector,o.a).name},"./src/common/code-editor/editor-status-bar/editor-status-bar.component.html":function(e,t){e.exports='<span ng-if="$ctrl.currentMode" class="push-10-r">\n  Mode: <strong>{{ $ctrl.currentMode }}</strong>\n  <span ng-if="$ctrl.additionalModeInfo">({{ $ctrl.additionalModeInfo }})</span>\n</span>\n<span ng-if="$ctrl.indentInfo" class="push-10-r">{{ $ctrl.indentInfo }}</span>\n<span ng-if="$ctrl.readOnly" class="pull-right">Read only</span>\n\n<a ng-if="$ctrl.cheatSheet" href ng-click="$ctrl.showCheatSheet()" class="pull-right">\n  <i class="fa fa-keyboard-o" aria-hidden="true"></i> Show keyboard shortcuts\n</a>\n'},"./src/common/code-editor/editor-status-bar/editor-status-bar.component.less":function(e,t,n){"use strict";n.r(t)},"./src/common/code-editor/index.ts":function(e,t,n){"use strict";n("./src/common/code-editor/code-editor.component.ts");var i=n("./src/common/code-editor/code-editor.module.ts");n.d(t,"a",function(){return i.a})},"./src/common/code-editor/tabbed-editor-container/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("./node_modules/angular/index.js"),o=n("./src/common/code-editor/code-editor.module.ts"),s=n("./src/common/dialogs/index.ts"),r=(n("./node_modules/angular-hotkeys/build/hotkeys.js"),{selector:"editorStatusBar",template:n("./src/common/code-editor/editor-status-bar/editor-status-bar.component.html"),styles:[n("./src/common/code-editor/editor-status-bar/editor-status-bar.component.less")],bindings:{additionalModeInfo:"<"},controller:function(){function e(e,t){this.$scope=e,this.hotkeys=t,this.cheatSheet=!1}return e.$inject=["$scope","hotkeys"],e.prototype.$onInit=function(){var e=this;this.$scope.$on("editorModeChanged",function(t,n){e.indentInfo=n?n.indentWithTabs?"Tab Size: ".concat(n.tabSize):"Spaces: ".concat(n.indentUnit):null,n&&n.name?e.currentMode=n.name:e.currentMode="Plain Text",e.readOnly=n&&n.readOnly,e.cheatSheet=!e.readOnly})},e.prototype.showCheatSheet=function(){this.hotkeys.toggleCheatSheet()},e}()}),a=i.module("common.codeEditor.statusBar",["cfp.hotkeys"]).component(r.selector,r).name,l=n("./src/common/markdown/index.ts"),c="confirmCloseModifiedFile",d={selector:"tabbedEditorContainer",template:n("./src/common/code-editor/tabbed-editor-container/tabbed-editor-container.component.html"),styles:[n("./src/common/code-editor/tabbed-editor-container/tabbed-editor-container.component.less")],transclude:!0,bindings:{task:"<",taskDefinitionVisible:"<",readonly:"<"},controller:function(){function e(e,t,n,i,o){this.$element=e,this.$scope=t,this.dialogs=n,this.FileService=i,this.codeEditorService=o}return e.$inject=["$element","$scope","dialogs","FileService","codeEditorService"],e.prototype.$onInit=function(){var e=this;this.$element.addClass(this.$element.prop("tagName").toLowerCase()),this.$scope.$watch(function(){var t=e.FileService.getActiveContext();return{hash:t.file?t.file.hash:null,content:t.file?t.file.content:null,contentType:t.file?t.file.contentType:null,line:t.line}},function(){var t=e,n=t.$element,i=t.FileService,o=i.getActiveContext();if(o.file){var s=o.file;e.fileReadOnly=e.readonly||s.attributes.readOnly,n.find(".limited-access-file-info").hide(),e.task&&e.task.limitedAccess?(n.find(".editor-container").hide(),n.find(".binary-file-info").hide(),n.find(".limited-access-file-info").show()):null==s.content?(n.find(".editor-container").hide(),n.find(".binary-file-info").hide(),e.currentFileHash=null):s.hash!==e.currentFileHash&&(e.currentFileHash=s.hash,e.isContentEditable(s)?(e.currentFileContent=s.content,e.currentFile=s,n.find(".editor-container").show(),n.find(".binary-file-info").hide()):(n.find(".editor-container").hide(),n.find(".binary-file-info").show()))}else if(!e.isTaskDefinitionVisible()){var r=e.getOpenedFiles()[0];r&&i.setActive(r.hash)}},!0)},e.prototype.isContentEditable=function(e){if(""===e.content)return!0;var t=e.contentType;return!t||this.codeEditorService.isContentTypeSupported(t)},e.prototype.showTaskDefinition=function(){this.FileService.setActive(null)},e.prototype.showFile=function(e){this.FileService.setActive(e)},e.prototype.closeFile=function(e,t){e.preventDefault(),e.stopPropagation();var n=this.FileService,i=this.dialogs;if(n.isModified(t)){var o=this.getOpenedFiles().filter(function(e){return e.hash===t})[0];i.open({component:c,resolve:{hash:function(){return t},file:function(){return o}},size:"lg",keyboard:!0,backdrop:"static",windowClass:"colored-header"})}else n.closeFile(t)},e.prototype.isTaskDefinitionVisible=function(){return!!this.taskDefinitionVisible},e.prototype.isActiveTaskDefinition=function(){return!this.FileService.getActiveFile()},e.prototype.isActiveTabForFile=function(e){return this.FileService.isActive(e)},e.prototype.isSingleFileMode=function(){return Boolean(this.task&&this.task.singleFileMode)},e.prototype.isSomeFileActive=function(){return Boolean(this.FileService.getActiveFile())},e.prototype.getOpenedFiles=function(){return this.FileService.getOpenedFiles()},e}()},u=i.module("exam.tabbedEditorContainer",[o.a,s.a,a,l.a]).component(d.selector,d).name},"./src/common/code-editor/tabbed-editor-container/tabbed-editor-container.component.html":function(e,t){e.exports='<div class="tab-container">\n  <ul class="nav nav-tabs">\n    <li id="task-definition-tab" ng-class="{ \'active\': !$ctrl.isSomeFileActive() }" ng-show="$ctrl.isTaskDefinitionVisible()">\n      <a href ng-click="$ctrl.showTaskDefinition()">\n        <i class="fa fa-lg fa-fw fa-list-alt" aria-hidden="true" style="vertical-align: middle;"></i> Task description\n      </a>\n    </li>\n\n    <li class="tab-file" id="tab-file-{{ file.hash }}"\n      ng-repeat="file in $ctrl.getOpenedFiles()"\n      ng-class="{ \'active\': $ctrl.isActiveTabForFile(file.hash), \'is-modified\': file.isModified() }"\n    >\n      <a href ng-click="$ctrl.showFile(file.hash)">\n        <span ng-show="file.isModified()">*</span>\n        <span class="file-name" title="{{ file.name }}" ng-show="!$ctrl.isSingleFileMode()">{{ file.name }}</span>\n        <span class="file-name" title="Solution editor" ng-show="$ctrl.isSingleFileMode()">Solution editor</span>\n        <span class="close-tab" aria-label="Close tab" ng-click="$ctrl.closeFile($event, file.hash)" ng-show="!$ctrl.isSingleFileMode()">\n          <i class="fa fa-times" aria-hidden="true"></i>\n        </span>\n      </a>\n    </li>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane cont no-files-are-open" ng-class="{ \'active\': !$ctrl.isSomeFileActive() }" ng-if="!$ctrl.isSingleFileMode() && !$ctrl.isTaskDefinitionVisible()">\n      <h3>No files are open</h3>\n      <p class="lead">Open a file using the file tree on the left.</p>\n    </div>\n    <div class="limited-access alert alert-warning alert-block" ng-if="$ctrl.task.limitedAccess">\n      <strong><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Limited access!</strong>\n      <strong>Unlock this task by upgrading your plan.</strong>\n    </div>\n    <div id="task-definition" class="tab-pane cont" ng-class="{ \'active\': $ctrl.isActiveTaskDefinition() }" ng-show="$ctrl.isTaskDefinitionVisible()">\n      <div class="question-text" render-markdown="$ctrl.task.question"></div>\n    </div>\n    <div id="code-editor" class="editor-tab tab-pane cont" ng-class="{ \'active\' : $ctrl.isSomeFileActive() }">\n      <div id="binaryFileInfo" class="binary-file-info" style="display: none;">\n        <div class="binary-file-info-content">\n          <div class="well">\n            <h4>The selected file cannot be edited, as it\'s a binary file.</h4>\n          </div>\n        </div>\n      </div>\n      <div id="limitedAccessInfo" class="limited-access-file-info" style="display: none;">\n        <div class="binary-file-info-content">\n          <div class="well">\n            <h4>This content is not available on your current plan. </h4>\n          </div>\n        </div>\n      </div>\n      <div class="editor-container-wrapper">\n        <div class="editor-container" ng-transclude></div>\n      </div>\n      <editor-status-bar></editor-status-bar>\n    </div>\n  </div>\n</div>\n'},"./src/common/code-editor/tabbed-editor-container/tabbed-editor-container.component.less":function(e,t,n){"use strict";n.r(t)},"./src/common/code-review/code-comment.component.html":function(e,t){e.exports='<div class="code-comment" ui-id="{{ $ctrl.comment.uiId }}" ng-class="{ \'comment-editing\' : $ctrl.isEditMode() }" ng-show="!$ctrl.comment.hidden">\n  <div class="code-comment-icon">\n    <i class="glyphicon glyphicon-comment" aria-hidden="true"></i>\n  </div>\n  <div class="code-comment-content">\n    <textarea\n      ng-model="$ctrl.commentModel"\n      ng-show="$ctrl.isEditMode()"\n      ng-keydown="$ctrl.handleKeyDown($event)"\n      maxlength="1024"\n    ></textarea>\n    <small ng-show="$ctrl.isEditMode()">{{ $ctrl.hotkeysMessage }}</small>\n    <blockquote ng-hide="$ctrl.isEditMode()" ng-click="$ctrl.edit()">{{ $ctrl.comment.text || \'\\n\' }}</blockquote>\n\n    <div class="clear"></div>\n    <button class="btn btn-xs btn-info" ng-click="$ctrl.save()" ng-if="$ctrl.isEditMode()">\n      <i class="fa fa-save" aria-hidden="true"></i> Save comment\n    </button>\n    <button class="btn btn-xs btn-default" ng-click="$ctrl.delete()" ng-if="$ctrl.isEditMode()">\n      <i class="fa fa-times" aria-hidden="true"></i> Delete comment\n    </button>\n    \x3c!--  <button class="btn btn-xs btn-info" ng-click="$ctrl.edit()" ng-hide="$ctrl.comment.editMode"><i class="fa fa-edit"></i> Edit comment</button>--\x3e\n    <button class="btn btn-xs btn-danger delete-comment" ng-click="$ctrl.delete()" ng-if="!$ctrl.isReadonly() && !$ctrl.isEditMode()">\n      <i class="fa fa-times" aria-hidden="true"></i> Delete comment\n    </button>\n    <button class="btn btn-xs btn-info hide-comment" ng-click="$ctrl.hide()" ng-if="!$ctrl.isReadonly() && !$ctrl.isEditMode()">\n      <i class="fa fa-eye-slash" aria-hidden="true"></i> Hide comment\n    </button>\n    <div class="clear"></div>\n  </div>\n  <div class="clear"></div>\n</div>\n'},"./src/common/code-review/code-review-editor.component.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return l});n("./src/common/code-review/codemirror-review-addon.ts");var i=n("./node_modules/jquery/dist/jquery.js"),o=n("./node_modules/angular/index.js"),s=n("./node_modules/lodash/difference.js"),r=n.n(s),a={selector:"codeReviewEditor",bindings:{comments:"<",codeCommentWidgetProvider:"<",fileHash:"<",disableCommentEditing:"<"},require:{answerContext:"^?answerContext"},controller:function(){function e(e,t,n,o,s,a,l){var c=this;this.$compile=e,this.$element=t,this.$interval=n,this.$scope=o,this.$timeout=s,this.codeMirror=a,this.FileService=l,this.synchronizeComments=function(){c.$scope.$evalAsync(function(){var e=c.editor;if(e.getValue()){var t=Array.isArray(c.comments)?c.comments:[];c.fileHash&&(t=t.filter(function(e){return e.fileHash===c.fileHash})),Array.isArray(e.editorComments)||(e.editorComments=[]);var n=e.editorComments;t.forEach(function(t){var i=n.find(function(e){return e.comment===t});if(i){var o=(s=i.lineWidget).node;s.node=null,s.clear(),i.lineWidget=e.getDoc().addLineWidget(t.endLine,o,{coverGutter:!0,insertAt:0})}else{var s=c.compileAsLineWidget(t.endLine,c.codeCommentWidgetProvider(),{comment:t,cm:e}),r=e.markText({line:t.startLine,ch:t.startColumn},{line:t.endLine,ch:t.endColumn},{className:"comment-code-selection"});i={comment:t,lineWidget:s,codeMarker:r},n.push(i)}});var o=r()(n.map(function(e){return e.comment}),t);o&&o.forEach(function(e){var t,i,o=n.find(function(t){return t.comment===e});o&&(null===(t=o.lineWidget)||void 0===t||t.clear(),null===(i=o.codeMarker)||void 0===i||i.clear(),n.splice(n.indexOf(o),1))}),e.clearGutter("hidden-comments"),n.forEach(function(t){var n=t.comment;n.hidden&&e.setGutterMarker(n.endLine,"hidden-comments",c.makeHiddenCommentMarker())}),c.refreshEditor();for(var s=function(e){if(e.comment.editMode)return c.$timeout(function(){var t=i(e.lineWidget.node).find("textarea");t.is(":focus")||t.focus()},250),"break"},a=0,l=n;a<l.length;a++){if("break"===s(l[a]))break}}})}}return e.$inject=["$compile","$element","$interval","$scope","$timeout","codeMirror","FileService"],e.prototype.$onInit=function(){var e=this,t=this.$scope,n=this.codeMirror,i=!this.disableCommentEditing,o=n.create(this.$element,{readOnly:!0,lineNumbers:!0,gutters:["CodeMirror-linenumbers","hidden-comments"],lineWrapping:!0,selectionPointer:!0,viewportMargin:1/0,allowNewComments:i});o.on("gutterClick",function(t,n){var i=t.lineInfo(n);Array.isArray(t.editorComments)&&t.editorComments.forEach(function(e){e.comment.hidden&&e.comment.endLine===i.line&&(e.comment.hidden=!1)}),e.synchronizeComments()});var s=n.findModeByExtension("java");s&&(o.setOption("mode",s.mime),n.autoLoadMode(o,s.mode)),this.editor=o,t.$on("refreshEditor",function(){e.refreshEditor()}),t.$watch(function(){var t;return null===(t=e.FileService.getActiveContext().file)||void 0===t?void 0:t.content},function(t){t&&(e.editor.getDoc().setValue(t),e.refreshEditor(),e.scrollToLine(e.FileService.getActiveContext().line),e.synchronizeComments())}),t.$watch(function(){var t;return null===(t=e.FileService.getActiveContext().file)||void 0===t?void 0:t.hash},function(t){if(t){var n=e.FileService.getActiveContext();e.setActiveFileWithComments(n.file),e.scrollToLine(n.line)}}),t.$watch(function(){return e.FileService.getActiveContext().line},function(t){e.scrollToLine(t)}),t.$watchCollection(function(){return e.comments},this.synchronizeComments),t.$watch(function(){return Array.isArray(e.comments)?e.comments.filter(function(e){return e.hidden}).length:0},this.synchronizeComments),this.refreshInterval=this.$interval(function(){window.dispatchEvent(new Event("resize"))},500)},e.prototype.$onDestroy=function(){this.$interval.cancel(this.refreshInterval)},e.prototype.refreshEditor=function(){var e=this,t=this.$scope,n=this.$timeout;t.$evalAsync(function(){n(function(){return e.editor.refresh()})})},e.prototype.compileAsLineWidget=function(e,t,n){var i=this,s=i.$compile,r=i.$scope,a=i.editor.getDoc(),l=o.element(t),c=r.$new();return o.extend(c,n),s(l)(c,void 0,{transcludeControllers:{answerContext:{instance:this.answerContext}}}),a.addLineWidget(e,l.get(0),{coverGutter:!0,insertAt:0})},e.prototype.makeHiddenCommentMarker=function(){return i('<i class="hidden-comments fa fa-eye-slash" title="Click to show hidden comments"></i>')[0]},e.prototype.scrollToLine=function(e){e<this.editor.lineCount()&&this.editor.scrollIntoView({line:e,ch:0})},e.prototype.setActiveFileWithComments=function(e){var t=this.codeMirror,n=this.editor,i=t.findModeByFileName(e.name);i&&(n.setOption("mode",i.mime),t.autoLoadMode(n,i.mode)),e.content?n.setValue(e.content):n.setValue(""),n.fileHash!==e.hash&&(n.editorComments&&n.editorComments.forEach(function(e){e.lineWidget&&e.lineWidget.clear(),e.codeMarker&&e.codeMarker.clear()}),n.editorComments=[],n.fileHash=e.hash),this.synchronizeComments()},e}()},l=o.module("exam.codeReviewEditor",[]).component(a.selector,a).name},"./src/common/code-review/code-review.module.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("./node_modules/angular/index.js"),o=n("./src/common/code-review/comment-service.ts"),s=n("./src/common/services/dialogs.service.ts"),r={selector:"codeComment",template:n("./src/common/code-review/code-comment.component.html"),bindings:{comment:"<",codeMirror:"<",readonly:"<"},controller:function(){function e(e,t,n,i,o,s){var r=this;this.$element=e,this.$q=t,this.$scope=n,this.$timeout=i,this.commentService=o,this.dialogs=s,this.hotkeySave=function(e){e.preventDefault(),r.saveComment(r.comment)},this.hotkeyEscape=function(){r.comment.text?(r.commentModel=r.comment.text,r.commentService.closeEditMode(r.comment)):r.commentService.removeComment(r.comment),r.codeMirror.refresh()}}return e.$inject=["$element","$q","$scope","$timeout","commentService","dialogs"],e.prototype.$onInit=function(){var e=this;this.initHotkeys(),this.$scope.$watch(function(){var t;return null===(t=e.comment)||void 0===t?void 0:t.editMode},function(t){t&&(e.commentModel=e.comment.text,e.$timeout(function(){return e.scrollIntoView()},100))})},e.prototype.$onChanges=function(e){this.comment=this.comment||{},e.comment&&(this.commentModel=this.comment.text)},e.prototype.isReadonly=function(){return this.readonly},e.prototype.isEditMode=function(){return!this.readonly&&this.comment.editMode},e.prototype.delete=function(){var e,t=this;this.isReadonly()||(((null===(e=this.comment)||void 0===e?void 0:e.text)?this.dialogs.confirm("Confirm delete","Are you sure that you want to permanently delete the selected comment?").result:this.$q.resolve()).then(function(){t.commentService.removeComment(t.comment),t.codeMirror.refresh()}),this.codeMirror.refresh())},e.prototype.hide=function(){this.comment.hidden=!0,this.codeMirror.refresh()},e.prototype.edit=function(){var e=this;if(!this.isReadonly()){var t=this.commentService,n=t.getActiveComment();n&&n!==this.comment&&t.closeEditMode(n),t.openEditMode(this.comment),this.$scope.$evalAsync(function(){e.$timeout(function(){return e.$element.find("textarea").focus()},100),e.codeMirror.refresh()})}},e.prototype.save=function(){this.saveComment(this.comment)},e.prototype.saveComment=function(e){var t=this;e.text=this.commentModel,this.commentService.closeEditMode(e),this.$scope.$evalAsync(function(){t.$timeout(function(){var n=t.codeMirror;n.refresh(),n.focus(),n.getDoc().setSelection({line:e.endLine,ch:e.endColumn})},100)})},e.prototype.initHotkeys=function(){(null===window||void 0===window?void 0:window.navigator.platform.includes("Mac"))?(this.hotkeysMessage="Press âŒ˜+S or âŒ˜+Enter to save the comment",this.hotkeys={"meta+s":this.hotkeySave,"meta+enter":this.hotkeySave,esc:this.hotkeyEscape}):(this.hotkeysMessage="Press Ctrl+S or Ctrl+Enter to save the comment",this.hotkeys={"ctrl+s":this.hotkeySave,"ctrl+enter":this.hotkeySave,esc:this.hotkeyEscape})},e.prototype.handleKeyDown=function(e){var t,n,i=[e.metaKey&&"meta",e.ctrlKey&&"ctrl","Esc"===e.key||"Escape"===e.key&&"esc","Enter"===e.key&&"enter",1===e.key.length&&e.key].filter(Boolean).join("+");null===(n=(t=this.hotkeys)[i])||void 0===n||n.call(t,e)},e.prototype.scrollIntoView=function(){var e,t=this.comment,n=this.codeMirror,i=n.lineCount();e=t.startLine<i-10?Math.max(0,t.startLine-1):Math.min(t.endLine+8,n.lineCount()-1),n.scrollIntoView({line:e,ch:0})},e}()},a=i.module("exam.codeComment",[o.a,s.a]).component(r.selector,r).name,l=n("./src/common/codemirror/index.ts"),c=n("./src/common/code-review/code-review-editor.component.ts"),d={selector:"examFileCommentsEditor",template:'\n    <code-review-editor\n      class="code-review-editor-wrapper"\n      disable-comment-editing="$ctrl.readonly"\n      comments="$ctrl.comments"\n      code-comment-widget-provider="$ctrl.codeCommentWidgetProvider"\n      file-hash="$ctrl.fileHash"\n    ></code-review-editor>\n  ',bindings:{comments:"<",fileHash:"<",readonly:"<"},controller:function(){function e(e){var t=this;this.commentService=e,this.codeCommentWidgetProvider=function(){var e=Boolean(t.readonly);return'<code-comment comment="comment" code-mirror="cm" readonly="'.concat(e,'"></code-comment>')}}return e.$inject=["commentService"],e.prototype.$onChanges=function(){this.commentService.setComments(this.comments)},e}()},u={selector:"fileAnswerComments",template:'\n    <code-review-editor\n      class="code-review-editor-wrapper"\n      disable-comment-editing="true"\n      code-comment-widget-provider="$ctrl.codeCommentWidgetProvider"\n      comments="$ctrl.comments[$ctrl.fileHash]"\n    ></code-review-editor>\n  ',bindings:{comments:"<",fileHash:"<"},controller:function(){function e(){}return e.prototype.codeCommentWidgetProvider=function(){return'<div code-comment-from-answer="comment" code-mirror="cm"></div>'},e}()},p={selector:"fileReferenceComments",template:'\n    <code-review-editor\n      class="code-review-editor-wrapper"\n      disable-comment-editing="true"\n      comments="$ctrl.comments"\n      code-comment-widget-provider="$ctrl.codeCommentWidgetProvider"\n    ></code-review-editor>\n  ',bindings:{referenceComments:"<",fileHash:"<"},controller:function(){function e(){this.comments=[]}return e.prototype.$onChanges=function(e){if(e.fileHash){var t=this.fileHash;this.referenceComments&&t?(this.referenceComments[t]||(this.referenceComments[t]=[]),this.comments=this.referenceComments[t]):this.comments=[]}},e.prototype.$onInit=function(){},e.prototype.codeCommentWidgetProvider=function(){return'<code-comment comment="comment" code-mirror="cm" readonly="true"></code-comment>'},e}()},h={selector:"fileReferenceCommentsEditor",template:'\n    <code-review-editor\n      class="code-review-editor-wrapper"\n      disable-comment-editing="false"\n      comments="$ctrl.comments"\n      code-comment-widget-provider="$ctrl.codeCommentWidgetProvider"\n    ></code-review-editor>\n  ',bindings:{referenceComments:"<",fileHash:"<"},controller:function(){function e(e,t,n){this.$rootScope=e,this.$scope=t,this.commentService=n}return e.$inject=["$rootScope","$scope","commentService"],e.prototype.$onChanges=function(e){if(e.fileHash){var t=this.fileHash;this.referenceComments&&t?(this.referenceComments[t]||(this.referenceComments[t]=[]),this.comments=this.referenceComments[t]):this.comments=[],this.commentService.setComments(this.comments)}},e.prototype.$onInit=function(){var e=this,t=this.$scope;t.$watch(function(){return e.comments},function(){e.updateCommentsCounts()},!0),t.$on("fileTree.synchronized",function(){e.updateCommentsCounts()})},e.prototype.updateCommentsCounts=function(){var e={};Object.entries(this.referenceComments).forEach(function(t){var n=t[0],i=t[1];e[encodeURIComponent(n)]=i.length}),this.$rootScope.$broadcast("updateCommentsCounts",e)},e.prototype.codeCommentWidgetProvider=function(){return'<code-comment comment="comment" code-mirror="cm" readonly="false"></code-comment>'},e}()},m=i.module("common.codeReview",[a,l.b,c.a,o.a]).component(d.selector,d).component(u.selector,u).component(p.selector,p).component(h.selector,h).name},"./src/common/code-review/codemirror-review-addon.ts":function(e,t,n){"use strict";var i=n("./node_modules/jquery/dist/jquery.js"),o=n("./node_modules/angular/index.js"),s=n("./node_modules/codemirror/lib/codemirror.js");function r(e){e.commentTooltip&&(e.commentTooltip.style.display="none")}function a(e){var t=e.getDoc(),n=o.element(e.getWrapperElement()),i=t.listSelections(),s=i.length&&i[0];s&&(t.setSelection(s.head),r(e),n.injector().invoke(["commentService",function(t){var i=s.head.line,o=s.head.ch,r=s.anchor.line,a=s.anchor.ch;(r<i||r===i&&a<o)&&(i=s.anchor.line,o=s.anchor.ch,r=s.head.line,a=s.head.ch),n.scope().$apply(function(){t.getComments().forEach(function(e){t.closeEditMode(e)});var n={fileHash:e.fileHash,text:"",startLine:i,startColumn:o,endLine:r,endColumn:a};t.addComment(n),t.openEditMode(n)})}]),r(e))}s.defineOption("allowNewComments",!1,function(e,t,n){var o=n&&n!==s.Init;t&&!o&&(e.setOption("extraKeys",{C:a}),function(e){e.commentTooltip=i('<div class="CodeMirror-tooltip">Press c to add a comment</div>').get(0),e.commentTooltip.style.display="none",document.body.appendChild(e.commentTooltip),e.commentTooltip}(e),e.on("beforeSelectionChange",function(e,t){var n=t.ranges;if(n&&n[0]&&!n[0].empty()){var i=n[0],o=e.cursorCoords(i.head,"page");!function(e,t,n){var i=e.commentTooltip;i&&(i.style.left=t+"px",i.style.top=n+"px",i.style.display="block")}(e,o.left,o.top)}else r(e)}))})},"./src/common/code-review/comment-service.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("./node_modules/angular/index.js"),o=function(){function e(){this.comments=[]}return e.prototype.addComment=function(e){var t=this.comments;e.editMode=!0,e.hidden=!1,e.uiId="comment-"+Date.now(),t.push(e)},e.prototype.openEditMode=function(e){this.comments.filter(function(e){return e.editMode}).forEach(function(e){e.editMode=!1}),e.editMode=!0,e.hidden=!1,this.activeComment=e},e.prototype.closeEditMode=function(e){e.editMode=!1,e===this.activeComment&&(this.activeComment=null)},e.prototype.removeComment=function(e){var t=this.comments;t.splice(t.indexOf(e),1)},e.prototype.setComments=function(e){this.comments=Array.isArray(e)?e:[]},e.prototype.getFileComments=function(e){return this.comments.filter(function(t){return t.fileHash===e})},e.prototype.getComments=function(){return this.comments},e.prototype.getActiveComment=function(){return this.activeComment},e}(),s=i.module("exam.commentService",[]).service("commentService",o).name},"./src/common/dvsk-ng-components/dvsk-file-button/dvsk-file-button.component.html":function(e,t){e.exports='<input type="file" ngf-select="$ctrl.onFileSelect({ $files: $files })" ngf-multiple="$ctrl.multiple" accept="{{ $ctrl.accept }}" />\n<button dvsk-button size="{{ $ctrl.size }}" icon="{{ $ctrl.icon }}" full-width="$ctrl.fullWidth" tabindex="-1" ng-transclude></button>\n'},"./src/common/dvsk-ng-components/dvsk-file-button/dvsk-file-button.component.less":function(e,t,n){"use strict";n.r(t)},"./src/common/dvsk-ng-components/dvsk-file-button/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("./node_modules/angular/index.js"),o=n("./node_modules/ng-file-upload/index.js"),s={selector:"dvskFileButton",template:n("./src/common/dvsk-ng-components/dvsk-file-button/dvsk-file-button.component.html"),styles:[n("./src/common/dvsk-ng-components/dvsk-file-button/dvsk-file-button.component.less")],transclude:!0,bindings:{icon:"@",size:"@",accept:"@",multiple:"<",fullWidth:"<",onFileSelect:"&"},controller:function(){function e(e,t){this.$element=e,this.$attrs=t,e.addClass(e[0].tagName.toLowerCase())}return e.$inject=["$element","$attrs"],e.prototype.$onChanges=function(){""===this.$attrs.fullWidth&&(this.fullWidth=!0),""===this.$attrs.multiple&&(this.multiple=!0),this.fullWidth?this.$element.attr("full-width",""):this.$element.removeAttr("full-width")},e}()},r=i.module("dvsk.fileButton",[o]).component(s.selector,s).name},"./src/common/files/file-tree/file-tree.component.html":function(e,t){e.exports='<div class="tree"></div>\n'},"./src/common/files/file-tree/file-tree.component.less":function(e,t,n){"use strict";n.r(t)},"./src/common/files/file-tree/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("./node_modules/angular/index.js"),o=(n("./node_modules/jstree/dist/jstree.js"),n("./node_modules/jquery/dist/jquery.js")),s=n("./node_modules/lodash/uniqueId.js"),r=n.n(s);function a(e,t){var n=e.attributes||{},i=Array.isArray(e.childrenHashes)?e.childrenHashes.map(function(e){return t[e]}).filter(Boolean).map(function(e){return a(e,t)}):[],o=n.modified||i.some(function(e){return e.modified}),s=e.name;o?s+="FILE"===e.type?' <i class="file-node-modified">[Modified]</i>':' <i class="folder-node-modified fa fa-circle" title="Folder contains modified files"></i>':n.hidden?s+=' <i class="file-node-hidden">[Hidden]</i>':n.readOnly?s+=' <i class="file-node-read-only">[Read only]</i>':n.verificationTest&&(s+=' <i class="file-node-verification-test">[Verification test]</i>');var l="";try{l=atob(e.hash)}catch(d){}var c={id:r()("file_"),hash:e.hash,text:s,type:e.type,modified:o,children:i,a_attr:{filehash:encodeURIComponent(e.hash)}};return("src"===l||"src/main"===l||o)&&(c.state={opened:!0}),c}function l(e){return a({hash:"ROOT_FILE",name:"Root",type:"DIRECTORY",childrenHashes:Object.values(e).filter(function(e){return!e.parentHash}).map(function(e){return e.hash})},e).children}var c="newFileModal",d={selector:"fileTree",template:n("./src/common/files/file-tree/file-tree.component.html"),styles:[n("./src/common/files/file-tree/file-tree.component.less")],bindings:{onSelect:"&",contextMenu:"<?"},controller:function(){function e(e,t,n,i,s){var r=this;this.$element=e,this.$rootScope=t,this.$scope=n,this.dialogs=i,this.fileService=s,this.isFileNode=function(e){return!!e&&"DIRECTORY"!==o.jstree.reference(e.reference).get_node(e.reference).type},this.removeFile=function(e,t){return r.dialogs.confirm("Delete file","Are you sure you want to delete the selected file?").result.then(function(){return r.fileService.deleteFile(t)})},this.newFile=function(e,t){r.openNewFileModal(e,t,!1)},this.newDirectory=function(e,t){r.openNewFileModal(e,t,!0)},this.$element.addClass(this.$element[0].tagName.toLowerCase()),this.jstreeContainer=this.$element.find(".tree")}return e.$inject=["$element","$rootScope","$scope","dialogs","fileService"],e.prototype.$onInit=function(){var e=this,t=this.$scope,n=this.fileService;this.resetTree(this.fileService.files),t.$on("filesReset",function(t,n){e.resetTree(n)}),t.$on("filesChanged",function(t,n){e.updateTree(n)}),t.$on("updateCommentsCounts",function(t,n){e.decorateFileTreeWithCommentCounts(e.jstree,n)}),t.$watch(function(){return n.getActiveFileHash()},function(t){e.selectTreeNodeByHash(t)})},e.prototype.resetTree=function(e){this.treeModel=l(e),this.jstree=this.initTree(this.treeModel)},e.prototype.updateTree=function(e){this.synchronizeTreeStructure(e)},e.prototype.executeContextMenuAction=function(e,t){var n=o.jstree.reference(t.reference),i=n.get_node(t.reference);e(n.get_path(i,"/")+"/",i.original.hash)},e.prototype.initTree=function(e){var t=this;this.jstree&&this.jstreeContainer.jstree("destroy");var n={core:{check_callback:!0,data:e,themes:{dots:!1}},types:{DIRECTORY:{icon:"fa fa-folder-o"},default:{icon:"fa fa-file-o"}},sort:function(e,t){var n=this.get_node(t),i=this.get_node(e);return i.type===n.type?i.text>n.text?1:-1:"DIRECTORY"===i.type?-1:"DIRECTORY"===n.type||i.text>n.text?1:-1},plugins:["types","wholerow","sort"]};this.contextMenu&&(n.plugins.push("contextmenu"),n.contextmenu={items:{new_file:{label:"New file",_disabled:this.isFileNode,icon:"fa fa-file",action:function(e){t.executeContextMenuAction(t.newFile,e)}},new_directory:{label:"New directory",_disabled:this.isFileNode,icon:"fa fa-folder",action:function(e){t.executeContextMenuAction(t.newDirectory,e)}},remove:{label:"Remove",icon:"fa fa-trash-o",action:function(e){t.executeContextMenuAction(t.removeFile,e)}}}});var i=this.jstreeContainer,o=i.jstree(n);return o.on("loaded.jstree",function(){t.$scope.$apply(function(){t.$rootScope.$broadcast("fileTree.synchronized",t.treeModel)})}),o.on("after_open.jstree",function(){o.hashesCount&&t.decorateFileTreeWithCommentCounts(o,o.hashesCount)}),i.on("changed.jstree",function(e,n){if("select_node"===n.action){var i=n.event,o=2===i.button||"contextmenu"===i.type;t.selectTreeNode(n,!o)}}),i.on("before_open.jstree",function(e,n){if(n.node&&n.node.children&&1===n.node.children.length){var i=n.node.children[0],o=t.jstreeContainer.jstree(!0),s=o.get_node(i);"DIRECTORY"===s.type&&o.open_node(s)}}),o},e.prototype.selectTreeNodeByHash=function(e){var t,n=this,i=this.jstreeContainer.jstree(!0),o=(null===(t=i._model)||void 0===t?void 0:t.data)||{},s=Object.values(o).find(function(t){var n;return(null===(n=null==t?void 0:t.original)||void 0===n?void 0:n.hash)===e});s&&this.$scope.$applyAsync(function(){i.activate_node(s,{}),n.updateSelectedLocation()})},e.prototype.updateSelectedLocation=function(e){var t=this.jstreeContainer.jstree(!0),n=t.get_selected(!0);if(this.selectedLocation="",n&&n.length){var i=n[0];"DIRECTORY"===i.type?(this.selectedLocation=t.get_path(i,"/"),this.selectedLocationHash=i.original.hash,e&&t.toggle_node(i)):"#"!==i.parent&&(this.selectedLocation=t.get_path(i.parent,"/"),this.selectedLocationHash=t.get_node(i.parent).original.hash)}this.selectedLocation&&(this.selectedLocation+="/")},e.prototype.selectTreeNode=function(e,t){"folder"!==e.node.type&&t&&this.fileService.openFile(e.node.original.hash),this.updateSelectedLocation(t),this.$scope.$applyAsync()},e.prototype.decorateFileTreeWithCommentCounts=function(e,t){e&&(e.hashesCount!==t&&(e.hashesCount=t),this.$element.find("a[filehash]").each(function(e,n){var i=o(n),s=i.attr("filehash"),r=i.find(".comments-count");t[s]?(i.hasClass("file-with-comments")||i.addClass("file-with-comments"),r.length?r.text(" ("+t[s]+")"):i.append('<span class="comments-count"> ('+t[s]+")</span>")):(i.hasClass("file-with-comments")&&i.removeClass("file-with-comments"),r.length&&r.remove())}))},e.prototype.extractTreeNodesFromTree=function(e){return Object.values(e._model.data).map(function(e){return e&&e.original}).filter(Boolean)},e.prototype.synchronizeTreeStructure=function(e){var t=this.jstreeContainer.jstree(!0);this.treeModel=l(e);var n=this.extractTreeNodesFromTree(t);n.forEach(function(n){n&&(e[n.hash]||t.delete_node(n))}),Object.keys(e).forEach(function(i){var o;if(!n.find(function(e){return e.hash===i})){var s=null===(o=e[i])||void 0===o?void 0:o.parentHash,r="#";s&&(r=n.find(function(e){return e.hash===s}));var l=a(e[i],e);t.create_node(r,l)}}),t.redraw(),this.$rootScope.$broadcast("fileTree.synchronized",this.treeModel)},e.prototype.openNewFileModal=function(e,t,n){this.dialogs.open({component:c,resolve:{location:function(){return e},locationHash:function(){return t},directoryMode:function(){return n}},size:"lg",keyboard:!0,backdrop:"static",windowClass:"colored-header"})},e}()},u=i.module("common.files.fileTree",[]).component(d.selector,d).name},"./src/common/utils/detect-indent.ts":function(e,t,n){"use strict";function i(e){switch(e){case"text/javascript":case"application/typescript":return" ".repeat(2);case"text/x-go":return"\t";default:return" ".repeat(4)}}function o(e){return String(e||"").split("\n").map(function(e){var t=e.replace(/[ \t\r]+$/,"").match(/^([ \t]+)/);if(!t)return null;if("\t"===t[1][0])return"\t";var n=t[1].replace(/\t/g,"");return n.length%4==0?" ".repeat(4):n.length%2==0?" ".repeat(2):null}).filter(Boolean)[0]}n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o})},0:function(e,t){}}]);